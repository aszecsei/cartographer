{"version":3,"sources":["math/vec2.ts","../node_modules/delaunator/index.js","../node_modules/d3-delaunay/src/path.js","../node_modules/d3-delaunay/src/polygon.js","../node_modules/d3-delaunay/src/voronoi.js","../node_modules/d3-delaunay/src/delaunay.js","../node_modules/d3-delaunay/src/index.js","math/mathf.ts","../node_modules/@ctrl/tinycolor/dist/es/util.js","../node_modules/@ctrl/tinycolor/dist/es/conversion.js","../node_modules/@ctrl/tinycolor/dist/es/css-color-names.js","../node_modules/@ctrl/tinycolor/dist/es/format-input.js","../node_modules/@ctrl/tinycolor/dist/es/index.js","../node_modules/@ctrl/tinycolor/dist/es/readability.js","../node_modules/@ctrl/tinycolor/dist/es/to-ms-filter.js","../node_modules/@ctrl/tinycolor/dist/es/from-ratio.js","../node_modules/@ctrl/tinycolor/dist/es/random.js","../node_modules/@ctrl/tinycolor/dist/es/public_api.js","main.ts","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["EPSILON","Math","pow","EDGE_STACK","Uint32Array","Delaunator","from","points","getX","defaultGetX","getY","defaultGetY","n","length","coords","Float64Array","i","p","constructor","Error","maxTriangles","max","_triangles","_halfedges","Int32Array","_hashSize","ceil","sqrt","_hullPrev","_hullNext","_hullTri","_hullHash","fill","_ids","_dists","update","hullPrev","hullNext","hullTri","hullHash","minX","Infinity","minY","maxX","maxY","x","y","cx","cy","minDist","i0","i1","i2","d","dist","i0x","i0y","i1x","i1y","minRadius","r","circumradius","i2x","i2y","quicksort","hull","j","d0","id","subarray","triangles","halfedges","orient","center","circumcenter","_cx","_cy","_hullStart","hullSize","_hashKey","trianglesLen","_addTriangle","k","xp","yp","abs","start","key","e","q","t","_legalize","floor","pseudoAngle","a","ar","b","a0","b0","al","bl","p0","pr","pl","p1","illegal","inCircle","hbl","_link","br","c","dx","dy","ax","ay","bx","by","px","py","qx","qy","rx","ry","ex","ey","fx","fy","ap","bp","cp","cl","ids","dists","left","right","temp","tempDist","median","swap","arr","tmp","epsilon","Path","_x0","_y0","_x1","_y1","_","moveTo","closePath","lineTo","arc","x0","y0","rect","w","h","value","Polygon","push","slice","Voronoi","delaunay","xmin","ymin","xmax","ymax","_circumcenters","vectors","_init","circumcenters","t1","t2","t3","x1","y1","x2","y2","x3","y3","a2","a3","b2","b3","d1","d2","d3","ab","render","context","buffer","undefined","inedges","ti","tj","xi","yi","xj","yj","_renderSegment","h0","h1","v","_project","renderBounds","renderCell","_clip","cellPolygons","cell","cellPolygon","polygon","S","c0","_regioncode","c1","_clipSegment","contains","_step","_cell","e0","V","_clipInfinite","_clipFinite","P","e1","sx0","sy0","sx1","sy1","_edgecode","_edge","vx0","vy0","vxn","vyn","Array","unshift","splice","vx","vy","tau","PI","pointX","pointY","area","jitter","sin","cos","Delaunay","_delaunator","_hullIndex","collinear","sort","f","bounds","hullIndex","voronoi","neighbors","l","indexOf","find","dc","dt","renderHull","renderPoints","hullPolygon","renderTriangle","t0","trianglePolygons","trianglePolygon","that","flatArray","flatIterable","array","call","bound01","isOnePointZero","processPercent","isPercentage","min","parseFloat","parseInt","String","clamp01","val","includes","boundAlpha","isNaN","convertToPercentage","Number","pad2","rgbToRgb","g","rgbToHsl","s","hslToRgb","hue2rgb","rgbToHsv","hsvToRgb","mod","rgbToHex","allow3Char","hex","round","toString","charAt","join","rgbaToHex","allow4Char","convertDecimalToHex","rgbaToArgbHex","convertHexToDecimal","parseIntFromHex","names","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","inputToRGB","color","rgb","ok","format","stringInputToObject","isValidCSSUnit","substr","Object","prototype","hasOwnProperty","CSS_INTEGER","CSS_NUMBER","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","matchers","RegExp","rgba","hsl","hsla","hsv","hsva","hex3","hex6","hex4","hex8","trim","toLowerCase","named","match","exec","Boolean","TinyColor","opts","originalInput","roundA","gradientType","isValid","isDark","getBrightness","isLight","toRgb","getLuminance","R","G","B","RsRGB","GsRGB","BsRGB","getAlpha","setAlpha","alpha","toHsv","toHsvString","toHsl","toHslString","toHex","toHexString","toHex8","toHex8String","toRgbString","toPercentageRgb","fmt","toPercentageRgbString","rnd","toName","_i","_a","keys","formatSet","formattedString","hasAlpha","needsAlphaFormat","startsWith","clone","lighten","amount","brighten","darken","tint","mix","shade","desaturate","saturate","greyscale","spin","hue","rgb1","rgb2","analogous","results","slices","part","ret","complement","monochromatic","res","modification","splitcomplement","triad","polyad","tetrad","result","increment","equals","tinycolor","readability","color1","color2","c2","isReadable","wcag2","level","size","readabilityLevel","mostReadable","baseColor","colorList","args","includeFallbackColors","bestColor","bestScore","colorList_1","score","toMsFilter","firstColor","secondColor","hex8String","secondHex8String","fromRatio","ratio","newColor","legacyRandom","random","options","count","totalColors","colors","seed","pickHue","pickSaturation","pickBrightness","hueRange","getHueRange","randomWithin","luminosity","saturationRange","getColorInfo","sMin","sMax","H","bMin","getMinimumBrightness","bMax","lowerBounds","s1","v1","s2","v2","m","colorInput","num","namedColor","name","defineColor","parsed","bounds_1","bound","range","brightnessRange","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","clear","hmrApply","hmrAcceptRun","window","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"main.c39d6dcf.js","sourceRoot":"..\\src","sourcesContent":["export class Vec2 {\r\n  x: number;\r\n  y: number;\r\n\r\n  constructor(x: number, y: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n}\r\n","\nconst EPSILON = Math.pow(2, -52);\nconst EDGE_STACK = new Uint32Array(512);\n\nexport default class Delaunator {\n\n    static from(points, getX = defaultGetX, getY = defaultGetY) {\n        const n = points.length;\n        const coords = new Float64Array(n * 2);\n\n        for (let i = 0; i < n; i++) {\n            const p = points[i];\n            coords[2 * i] = getX(p);\n            coords[2 * i + 1] = getY(p);\n        }\n\n        return new Delaunator(coords);\n    }\n\n    constructor(coords) {\n        const n = coords.length >> 1;\n        if (n > 0 && typeof coords[0] !== 'number') throw new Error('Expected coords to contain numbers.');\n\n        this.coords = coords;\n\n        // arrays that will store the triangulation graph\n        const maxTriangles = Math.max(2 * n - 5, 0);\n        this._triangles = new Uint32Array(maxTriangles * 3);\n        this._halfedges = new Int32Array(maxTriangles * 3);\n\n        // temporary arrays for tracking the edges of the advancing convex hull\n        this._hashSize = Math.ceil(Math.sqrt(n));\n        this._hullPrev = new Uint32Array(n); // edge to prev edge\n        this._hullNext = new Uint32Array(n); // edge to next edge\n        this._hullTri = new Uint32Array(n); // edge to adjacent triangle\n        this._hullHash = new Int32Array(this._hashSize).fill(-1); // angular edge hash\n\n        // temporary arrays for sorting points\n        this._ids = new Uint32Array(n);\n        this._dists = new Float64Array(n);\n\n        this.update();\n    }\n\n    update() {\n        const {coords, _hullPrev: hullPrev, _hullNext: hullNext, _hullTri: hullTri, _hullHash: hullHash} =  this;\n        const n = coords.length >> 1;\n\n        // populate an array of point indices; calculate input data bbox\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n\n        for (let i = 0; i < n; i++) {\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            this._ids[i] = i;\n        }\n        const cx = (minX + maxX) / 2;\n        const cy = (minY + maxY) / 2;\n\n        let minDist = Infinity;\n        let i0, i1, i2;\n\n        // pick a seed point close to the center\n        for (let i = 0; i < n; i++) {\n            const d = dist(cx, cy, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist) {\n                i0 = i;\n                minDist = d;\n            }\n        }\n        const i0x = coords[2 * i0];\n        const i0y = coords[2 * i0 + 1];\n\n        minDist = Infinity;\n\n        // find the point closest to the seed\n        for (let i = 0; i < n; i++) {\n            if (i === i0) continue;\n            const d = dist(i0x, i0y, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist && d > 0) {\n                i1 = i;\n                minDist = d;\n            }\n        }\n        let i1x = coords[2 * i1];\n        let i1y = coords[2 * i1 + 1];\n\n        let minRadius = Infinity;\n\n        // find the third point which forms the smallest circumcircle with the first two\n        for (let i = 0; i < n; i++) {\n            if (i === i0 || i === i1) continue;\n            const r = circumradius(i0x, i0y, i1x, i1y, coords[2 * i], coords[2 * i + 1]);\n            if (r < minRadius) {\n                i2 = i;\n                minRadius = r;\n            }\n        }\n        let i2x = coords[2 * i2];\n        let i2y = coords[2 * i2 + 1];\n\n        if (minRadius === Infinity) {\n            // order collinear points by dx (or dy if all x are identical)\n            // and return the list as a hull\n            for (let i = 0; i < n; i++) {\n                this._dists[i] = (coords[2 * i] - coords[0]) || (coords[2 * i + 1] - coords[1]);\n            }\n            quicksort(this._ids, this._dists, 0, n - 1);\n            const hull = new Uint32Array(n);\n            let j = 0;\n            for (let i = 0, d0 = -Infinity; i < n; i++) {\n                const id = this._ids[i];\n                if (this._dists[id] > d0) {\n                    hull[j++] = id;\n                    d0 = this._dists[id];\n                }\n            }\n            this.hull = hull.subarray(0, j);\n            this.triangles = new Uint32Array(0);\n            this.halfedges = new Uint32Array(0);\n            return;\n        }\n\n        // swap the order of the seed points for counter-clockwise orientation\n        if (orient(i0x, i0y, i1x, i1y, i2x, i2y)) {\n            const i = i1;\n            const x = i1x;\n            const y = i1y;\n            i1 = i2;\n            i1x = i2x;\n            i1y = i2y;\n            i2 = i;\n            i2x = x;\n            i2y = y;\n        }\n\n        const center = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);\n        this._cx = center.x;\n        this._cy = center.y;\n\n        for (let i = 0; i < n; i++) {\n            this._dists[i] = dist(coords[2 * i], coords[2 * i + 1], center.x, center.y);\n        }\n\n        // sort the points by distance from the seed triangle circumcenter\n        quicksort(this._ids, this._dists, 0, n - 1);\n\n        // set up the seed triangle as the starting hull\n        this._hullStart = i0;\n        let hullSize = 3;\n\n        hullNext[i0] = hullPrev[i2] = i1;\n        hullNext[i1] = hullPrev[i0] = i2;\n        hullNext[i2] = hullPrev[i1] = i0;\n\n        hullTri[i0] = 0;\n        hullTri[i1] = 1;\n        hullTri[i2] = 2;\n\n        hullHash.fill(-1);\n        hullHash[this._hashKey(i0x, i0y)] = i0;\n        hullHash[this._hashKey(i1x, i1y)] = i1;\n        hullHash[this._hashKey(i2x, i2y)] = i2;\n\n        this.trianglesLen = 0;\n        this._addTriangle(i0, i1, i2, -1, -1, -1);\n\n        for (let k = 0, xp, yp; k < this._ids.length; k++) {\n            const i = this._ids[k];\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n\n            // skip near-duplicate points\n            if (k > 0 && Math.abs(x - xp) <= EPSILON && Math.abs(y - yp) <= EPSILON) continue;\n            xp = x;\n            yp = y;\n\n            // skip seed triangle points\n            if (i === i0 || i === i1 || i === i2) continue;\n\n            // find a visible edge on the convex hull using edge hash\n            let start = 0;\n            for (let j = 0, key = this._hashKey(x, y); j < this._hashSize; j++) {\n                start = hullHash[(key + j) % this._hashSize];\n                if (start !== -1 && start !== hullNext[start]) break;\n            }\n\n            start = hullPrev[start];\n            let e = start, q;\n            while (q = hullNext[e], !orient(x, y, coords[2 * e], coords[2 * e + 1], coords[2 * q], coords[2 * q + 1])) {\n                e = q;\n                if (e === start) {\n                    e = -1;\n                    break;\n                }\n            }\n            if (e === -1) continue; // likely a near-duplicate point; skip it\n\n            // add the first triangle from the point\n            let t = this._addTriangle(e, i, hullNext[e], -1, -1, hullTri[e]);\n\n            // recursively flip triangles from the point until they satisfy the Delaunay condition\n            hullTri[i] = this._legalize(t + 2);\n            hullTri[e] = t; // keep track of boundary triangles on the hull\n            hullSize++;\n\n            // walk forward through the hull, adding more triangles and flipping recursively\n            let n = hullNext[e];\n            while (q = hullNext[n], orient(x, y, coords[2 * n], coords[2 * n + 1], coords[2 * q], coords[2 * q + 1])) {\n                t = this._addTriangle(n, i, q, hullTri[i], -1, hullTri[n]);\n                hullTri[i] = this._legalize(t + 2);\n                hullNext[n] = n; // mark as removed\n                hullSize--;\n                n = q;\n            }\n\n            // walk backward from the other side, adding more triangles and flipping\n            if (e === start) {\n                while (q = hullPrev[e], orient(x, y, coords[2 * q], coords[2 * q + 1], coords[2 * e], coords[2 * e + 1])) {\n                    t = this._addTriangle(q, i, e, -1, hullTri[e], hullTri[q]);\n                    this._legalize(t + 2);\n                    hullTri[q] = t;\n                    hullNext[e] = e; // mark as removed\n                    hullSize--;\n                    e = q;\n                }\n            }\n\n            // update the hull indices\n            this._hullStart = hullPrev[i] = e;\n            hullNext[e] = hullPrev[n] = i;\n            hullNext[i] = n;\n\n            // save the two new edges in the hash table\n            hullHash[this._hashKey(x, y)] = i;\n            hullHash[this._hashKey(coords[2 * e], coords[2 * e + 1])] = e;\n        }\n\n        this.hull = new Uint32Array(hullSize);\n        for (let i = 0, e = this._hullStart; i < hullSize; i++) {\n            this.hull[i] = e;\n            e = hullNext[e];\n        }\n\n        // trim typed triangle mesh arrays\n        this.triangles = this._triangles.subarray(0, this.trianglesLen);\n        this.halfedges = this._halfedges.subarray(0, this.trianglesLen);\n    }\n\n    _hashKey(x, y) {\n        return Math.floor(pseudoAngle(x - this._cx, y - this._cy) * this._hashSize) % this._hashSize;\n    }\n\n    _legalize(a) {\n        const {_triangles: triangles, _halfedges: halfedges, coords} = this;\n\n        let i = 0;\n        let ar = 0;\n\n        // recursion eliminated with a fixed-size stack\n        while (true) {\n            const b = halfedges[a];\n\n            /* if the pair of triangles doesn't satisfy the Delaunay condition\n             * (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n             * then do the same check/flip recursively for the new pair of triangles\n             *\n             *           pl                    pl\n             *          /||\\                  /  \\\n             *       al/ || \\bl            al/    \\a\n             *        /  ||  \\              /      \\\n             *       /  a||b  \\    flip    /___ar___\\\n             *     p0\\   ||   /p1   =>   p0\\---bl---/p1\n             *        \\  ||  /              \\      /\n             *       ar\\ || /br             b\\    /br\n             *          \\||/                  \\  /\n             *           pr                    pr\n             */\n            const a0 = a - a % 3;\n            ar = a0 + (a + 2) % 3;\n\n            if (b === -1) { // convex hull edge\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n                continue;\n            }\n\n            const b0 = b - b % 3;\n            const al = a0 + (a + 1) % 3;\n            const bl = b0 + (b + 2) % 3;\n\n            const p0 = triangles[ar];\n            const pr = triangles[a];\n            const pl = triangles[al];\n            const p1 = triangles[bl];\n\n            const illegal = inCircle(\n                coords[2 * p0], coords[2 * p0 + 1],\n                coords[2 * pr], coords[2 * pr + 1],\n                coords[2 * pl], coords[2 * pl + 1],\n                coords[2 * p1], coords[2 * p1 + 1]);\n\n            if (illegal) {\n                triangles[a] = p1;\n                triangles[b] = p0;\n\n                const hbl = halfedges[bl];\n\n                // edge swapped on the other side of the hull (rare); fix the halfedge reference\n                if (hbl === -1) {\n                    let e = this._hullStart;\n                    do {\n                        if (this._hullTri[e] === bl) {\n                            this._hullTri[e] = a;\n                            break;\n                        }\n                        e = this._hullPrev[e];\n                    } while (e !== this._hullStart);\n                }\n                this._link(a, hbl);\n                this._link(b, halfedges[ar]);\n                this._link(ar, bl);\n\n                const br = b0 + (b + 1) % 3;\n\n                // don't worry about hitting the cap: it can only happen on extremely degenerate input\n                if (i < EDGE_STACK.length) {\n                    EDGE_STACK[i++] = br;\n                }\n            } else {\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n            }\n        }\n\n        return ar;\n    }\n\n    _link(a, b) {\n        this._halfedges[a] = b;\n        if (b !== -1) this._halfedges[b] = a;\n    }\n\n    // add a new triangle given vertex indices and adjacent half-edge ids\n    _addTriangle(i0, i1, i2, a, b, c) {\n        const t = this.trianglesLen;\n\n        this._triangles[t] = i0;\n        this._triangles[t + 1] = i1;\n        this._triangles[t + 2] = i2;\n\n        this._link(t, a);\n        this._link(t + 1, b);\n        this._link(t + 2, c);\n\n        this.trianglesLen += 3;\n\n        return t;\n    }\n}\n\n// monotonically increases with real angle, but doesn't need expensive trigonometry\nfunction pseudoAngle(dx, dy) {\n    const p = dx / (Math.abs(dx) + Math.abs(dy));\n    return (dy > 0 ? 3 - p : 1 + p) / 4; // [0..1]\n}\n\nfunction dist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n\nfunction orient(px, py, qx, qy, rx, ry) {\n    return (qy - py) * (rx - qx) - (qx - px) * (ry - qy) < 0;\n}\n\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n    const dx = ax - px;\n    const dy = ay - py;\n    const ex = bx - px;\n    const ey = by - py;\n    const fx = cx - px;\n    const fy = cy - py;\n\n    const ap = dx * dx + dy * dy;\n    const bp = ex * ex + ey * ey;\n    const cp = fx * fx + fy * fy;\n\n    return dx * (ey * cp - bp * fy) -\n           dy * (ex * cp - bp * fx) +\n           ap * (ex * fy - ey * fx) < 0;\n}\n\nfunction circumradius(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = (ey * bl - dy * cl) * d;\n    const y = (dx * cl - ex * bl) * d;\n\n    return x * x + y * y;\n}\n\nfunction circumcenter(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = ax + (ey * bl - dy * cl) * d;\n    const y = ay + (dx * cl - ex * bl) * d;\n\n    return {x, y};\n}\n\nfunction quicksort(ids, dists, left, right) {\n    if (right - left <= 20) {\n        for (let i = left + 1; i <= right; i++) {\n            const temp = ids[i];\n            const tempDist = dists[temp];\n            let j = i - 1;\n            while (j >= left && dists[ids[j]] > tempDist) ids[j + 1] = ids[j--];\n            ids[j + 1] = temp;\n        }\n    } else {\n        const median = (left + right) >> 1;\n        let i = left + 1;\n        let j = right;\n        swap(ids, median, i);\n        if (dists[ids[left]] > dists[ids[right]]) swap(ids, left, right);\n        if (dists[ids[i]] > dists[ids[right]]) swap(ids, i, right);\n        if (dists[ids[left]] > dists[ids[i]]) swap(ids, left, i);\n\n        const temp = ids[i];\n        const tempDist = dists[temp];\n        while (true) {\n            do i++; while (dists[ids[i]] < tempDist);\n            do j--; while (dists[ids[j]] > tempDist);\n            if (j < i) break;\n            swap(ids, i, j);\n        }\n        ids[left + 1] = ids[j];\n        ids[j] = temp;\n\n        if (right - i + 1 >= j - left) {\n            quicksort(ids, dists, i, right);\n            quicksort(ids, dists, left, j - 1);\n        } else {\n            quicksort(ids, dists, left, j - 1);\n            quicksort(ids, dists, i, right);\n        }\n    }\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultGetX(p) {\n    return p[0];\n}\nfunction defaultGetY(p) {\n    return p[1];\n}\n","const epsilon = 1e-6;\n\nexport default class Path {\n  constructor() {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n  }\n  moveTo(x, y) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  }\n  lineTo(x, y) {\n    this._ += `L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arc(x, y, r) {\n    x = +x, y = +y, r = +r;\n    const x0 = x + r;\n    const y0 = y;\n    if (r < 0) throw new Error(\"negative radius\");\n    if (this._x1 === null) this._ += `M${x0},${y0}`;\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) this._ += \"L\" + x0 + \",\" + y0;\n    if (!r) return;\n    this._ += `A${r},${r},0,1,1,${x - r},${y}A${r},${r},0,1,1,${this._x1 = x0},${this._y1 = y0}`;\n  }\n  rect(x, y, w, h) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${+w}v${+h}h${-w}Z`;\n  }\n  value() {\n    return this._ || null;\n  }\n}\n","export default class Polygon {\n  constructor() {\n    this._ = [];\n  }\n  moveTo(x, y) {\n    this._.push([x, y]);\n  }\n  closePath() {\n    this._.push(this._[0].slice());\n  }\n  lineTo(x, y) {\n    this._.push([x, y]);\n  }\n  value() {\n    return this._.length ? this._ : null;\n  }\n}\n","import Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\n\nexport default class Voronoi {\n  constructor(delaunay, [xmin, ymin, xmax, ymax] = [0, 0, 960, 500]) {\n    if (!((xmax = +xmax) >= (xmin = +xmin)) || !((ymax = +ymax) >= (ymin = +ymin))) throw new Error(\"invalid bounds\");\n    this.delaunay = delaunay;\n    this._circumcenters = new Float64Array(delaunay.points.length * 2);\n    this.vectors = new Float64Array(delaunay.points.length * 2);\n    this.xmax = xmax, this.xmin = xmin;\n    this.ymax = ymax, this.ymin = ymin;\n    this._init();\n  }\n  update() {\n    this.delaunay.update();\n    this._init();\n    return this;\n  }\n  _init() {\n    const {delaunay: {points, hull, triangles}, vectors} = this;\n\n    // Compute circumcenters.\n    const circumcenters = this.circumcenters = this._circumcenters.subarray(0, triangles.length / 3 * 2);\n    for (let i = 0, j = 0, n = triangles.length; i < n; i += 3, j += 2) {\n      const t1 = triangles[i] * 2;\n      const t2 = triangles[i + 1] * 2;\n      const t3 = triangles[i + 2] * 2;\n      const x1 = points[t1];\n      const y1 = points[t1 + 1];\n      const x2 = points[t2];\n      const y2 = points[t2 + 1];\n      const x3 = points[t3];\n      const y3 = points[t3 + 1];\n      const a2 = x1 - x2;\n      const a3 = x1 - x3;\n      const b2 = y1 - y2;\n      const b3 = y1 - y3;\n      const d1 = x1 * x1 + y1 * y1;\n      const d2 = d1 - x2 * x2 - y2 * y2;\n      const d3 = d1 - x3 * x3 - y3 * y3;\n      const ab = (a3 * b2 - a2 * b3) * 2;\n      // degenerate case (2 points)\n      if (!ab) {\n        circumcenters[j] = (x1 + x3) / 2 + 1e8 * b3;\n        circumcenters[j + 1] = (y1 + y3) / 2 - 1e8 * a3;\n      } else {\n        circumcenters[j] = (b2 * d3 - b3 * d2) / ab;\n        circumcenters[j + 1] = (a3 * d2 - a2 * d3) / ab;\n      }\n    }\n\n    // Compute exterior cell rays.\n    let h = hull[hull.length - 1];\n    let p0, p1 = h * 4;\n    let x0, x1 = points[2 * h];\n    let y0, y1 = points[2 * h + 1];\n    vectors.fill(0);\n    for (let i = 0; i < hull.length; ++i) {\n      h = hull[i];\n      p0 = p1, x0 = x1, y0 = y1;\n      p1 = h * 4, x1 = points[2 * h], y1 = points[2 * h + 1];\n      vectors[p0 + 2] = vectors[p1] = y0 - y1;\n      vectors[p0 + 3] = vectors[p1 + 1] = x1 - x0;\n    }\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {delaunay: {halfedges, inedges, hull}, circumcenters, vectors} = this;\n    if (hull.length <= 1) return null;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = Math.floor(i / 3) * 2;\n      const tj = Math.floor(j / 3) * 2;\n      const xi = circumcenters[ti];\n      const yi = circumcenters[ti + 1];\n      const xj = circumcenters[tj];\n      const yj = circumcenters[tj + 1];\n      this._renderSegment(xi, yi, xj, yj, context);\n    }\n    let h0, h1 = hull[hull.length - 1];\n    for (let i = 0; i < hull.length; ++i) {\n      h0 = h1, h1 = hull[i];\n      const t = Math.floor(inedges[h1] / 3) * 2;\n      const x = circumcenters[t];\n      const y = circumcenters[t + 1];\n      const v = h0 * 4;\n      const p = this._project(x, y, vectors[v + 2], vectors[v + 3]);\n      if (p) this._renderSegment(x, y, p[0], p[1], context);\n    }\n    return buffer && buffer.value();\n  }\n  renderBounds(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    context.rect(this.xmin, this.ymin, this.xmax - this.xmin, this.ymax - this.ymin);\n    return buffer && buffer.value();\n  }\n  renderCell(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const points = this._clip(i);\n    if (points === null) return;\n    context.moveTo(points[0], points[1]);\n    for (let i = 2, n = points.length; i < n; i += 2) {\n      if (points[i] !== points[i-2] || points[i+1] !== points[i-1])\n        context.lineTo(points[i], points[i + 1]);\n    }\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *cellPolygons() {\n    const {delaunay: {points}} = this;\n    for (let i = 0, n = points.length / 2; i < n; ++i) {\n      const cell = this.cellPolygon(i);\n      if (cell) yield cell;\n    }\n  }\n  cellPolygon(i) {\n    const polygon = new Polygon;\n    this.renderCell(i, polygon);\n    return polygon.value();\n  }\n  _renderSegment(x0, y0, x1, y1, context) {\n    let S;\n    const c0 = this._regioncode(x0, y0);\n    const c1 = this._regioncode(x1, y1);\n    if (c0 === 0 && c1 === 0) {\n      context.moveTo(x0, y0);\n      context.lineTo(x1, y1);\n    } else if (S = this._clipSegment(x0, y0, x1, y1, c0, c1)) {\n      context.moveTo(S[0], S[1]);\n      context.lineTo(S[2], S[3]);\n    }\n  }\n  contains(i, x, y) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return false;\n    return this.delaunay._step(i, x, y) === i;\n  }\n  _cell(i) {\n    const {circumcenters, delaunay: {inedges, halfedges, triangles}} = this;\n    const e0 = inedges[i];\n    if (e0 === -1) return null; // coincident point\n    const points = [];\n    let e = e0;\n    do {\n      const t = Math.floor(e / 3);\n      points.push(circumcenters[t * 2], circumcenters[t * 2 + 1]);\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) break; // bad triangulation\n      e = halfedges[e];\n    } while (e !== e0 && e !== -1);\n    return points;\n  }\n  _clip(i) {\n    // degenerate case (1 valid point: return the box)\n    if (i === 0 && this.delaunay.hull.length === 1) {\n      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n    }\n    const points = this._cell(i);\n    if (points === null) return null;\n    const {vectors: V} = this;\n    const v = i * 4;\n    return V[v] || V[v + 1]\n        ? this._clipInfinite(i, points, V[v], V[v + 1], V[v + 2], V[v + 3])\n        : this._clipFinite(i, points);\n  }\n  _clipFinite(i, points) {\n    const n = points.length;\n    let P = null;\n    let x0, y0, x1 = points[n - 2], y1 = points[n - 1];\n    let c0, c1 = this._regioncode(x1, y1);\n    let e0, e1;\n    for (let j = 0; j < n; j += 2) {\n      x0 = x1, y0 = y1, x1 = points[j], y1 = points[j + 1];\n      c0 = c1, c1 = this._regioncode(x1, y1);\n      if (c0 === 0 && c1 === 0) {\n        e0 = e1, e1 = 0;\n        if (P) P.push(x1, y1);\n        else P = [x1, y1];\n      } else {\n        let S, sx0, sy0, sx1, sy1;\n        if (c0 === 0) {\n          if ((S = this._clipSegment(x0, y0, x1, y1, c0, c1)) === null) continue;\n          [sx0, sy0, sx1, sy1] = S;\n        } else {\n          if ((S = this._clipSegment(x1, y1, x0, y0, c1, c0)) === null) continue;\n          [sx1, sy1, sx0, sy0] = S;\n          e0 = e1, e1 = this._edgecode(sx0, sy0);\n          if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n          if (P) P.push(sx0, sy0);\n          else P = [sx0, sy0];\n        }\n        e0 = e1, e1 = this._edgecode(sx1, sy1);\n        if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n        if (P) P.push(sx1, sy1);\n        else P = [sx1, sy1];\n      }\n    }\n    if (P) {\n      e0 = e1, e1 = this._edgecode(P[0], P[1]);\n      if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n    }\n    return P;\n  }\n  _clipSegment(x0, y0, x1, y1, c0, c1) {\n    while (true) {\n      if (c0 === 0 && c1 === 0) return [x0, y0, x1, y1];\n      if (c0 & c1) return null;\n      let x, y, c = c0 || c1;\n      if (c & 0b1000) x = x0 + (x1 - x0) * (this.ymax - y0) / (y1 - y0), y = this.ymax;\n      else if (c & 0b0100) x = x0 + (x1 - x0) * (this.ymin - y0) / (y1 - y0), y = this.ymin;\n      else if (c & 0b0010) y = y0 + (y1 - y0) * (this.xmax - x0) / (x1 - x0), x = this.xmax;\n      else y = y0 + (y1 - y0) * (this.xmin - x0) / (x1 - x0), x = this.xmin;\n      if (c0) x0 = x, y0 = y, c0 = this._regioncode(x0, y0);\n      else x1 = x, y1 = y, c1 = this._regioncode(x1, y1);\n    }\n  }\n  _clipInfinite(i, points, vx0, vy0, vxn, vyn) {\n    let P = Array.from(points), p;\n    if (p = this._project(P[0], P[1], vx0, vy0)) P.unshift(p[0], p[1]);\n    if (p = this._project(P[P.length - 2], P[P.length - 1], vxn, vyn)) P.push(p[0], p[1]);\n    if (P = this._clipFinite(i, P)) {\n      for (let j = 0, n = P.length, c0, c1 = this._edgecode(P[n - 2], P[n - 1]); j < n; j += 2) {\n        c0 = c1, c1 = this._edgecode(P[j], P[j + 1]);\n        if (c0 && c1) j = this._edge(i, c0, c1, P, j), n = P.length;\n      }\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      P = [this.xmin, this.ymin, this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax];\n    }\n    return P;\n  }\n  _edge(i, e0, e1, P, j) {\n    while (e0 !== e1) {\n      let x, y;\n      switch (e0) {\n        case 0b0101: e0 = 0b0100; continue; // top-left\n        case 0b0100: e0 = 0b0110, x = this.xmax, y = this.ymin; break; // top\n        case 0b0110: e0 = 0b0010; continue; // top-right\n        case 0b0010: e0 = 0b1010, x = this.xmax, y = this.ymax; break; // right\n        case 0b1010: e0 = 0b1000; continue; // bottom-right\n        case 0b1000: e0 = 0b1001, x = this.xmin, y = this.ymax; break; // bottom\n        case 0b1001: e0 = 0b0001; continue; // bottom-left\n        case 0b0001: e0 = 0b0101, x = this.xmin, y = this.ymin; break; // left\n      }\n      if ((P[j] !== x || P[j + 1] !== y) && this.contains(i, x, y)) {\n        P.splice(j, 0, x, y), j += 2;\n      }\n    }\n    return j;\n  }\n  _project(x0, y0, vx, vy) {\n    let t = Infinity, c, x, y;\n    if (vy < 0) { // top\n      if (y0 <= this.ymin) return null;\n      if ((c = (this.ymin - y0) / vy) < t) y = this.ymin, x = x0 + (t = c) * vx;\n    } else if (vy > 0) { // bottom\n      if (y0 >= this.ymax) return null;\n      if ((c = (this.ymax - y0) / vy) < t) y = this.ymax, x = x0 + (t = c) * vx;\n    }\n    if (vx > 0) { // right\n      if (x0 >= this.xmax) return null;\n      if ((c = (this.xmax - x0) / vx) < t) x = this.xmax, y = y0 + (t = c) * vy;\n    } else if (vx < 0) { // left\n      if (x0 <= this.xmin) return null;\n      if ((c = (this.xmin - x0) / vx) < t) x = this.xmin, y = y0 + (t = c) * vy;\n    }\n    return [x, y];\n  }\n  _edgecode(x, y) {\n    return (x === this.xmin ? 0b0001\n        : x === this.xmax ? 0b0010 : 0b0000)\n        | (y === this.ymin ? 0b0100\n        : y === this.ymax ? 0b1000 : 0b0000);\n  }\n  _regioncode(x, y) {\n    return (x < this.xmin ? 0b0001\n        : x > this.xmax ? 0b0010 : 0b0000)\n        | (y < this.ymin ? 0b0100\n        : y > this.ymax ? 0b1000 : 0b0000);\n  }\n}\n","import Delaunator from \"delaunator\";\nimport Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\nimport Voronoi from \"./voronoi.js\";\n\nconst tau = 2 * Math.PI;\n\nfunction pointX(p) {\n  return p[0];\n}\n\nfunction pointY(p) {\n  return p[1];\n}\n\nfunction area(hull, points) {\n  let n = hull.length, x0, y0,\n      x1 = points[2 * hull[n - 1]],\n      y1 = points[2 * hull[n - 1] + 1],\n      area = 0;\n\n  for (let i = 0; i < n; i ++) {\n    x0 = x1, y0 = y1;\n    x1 = points[2 * hull[i]];\n    y1 = points[2 * hull[i] + 1];\n    area += y0 * x1 - x0 * y1;\n  }\n\n  return area / 2;\n}\n\nfunction jitter(x, y, r) {\n  return [x + Math.sin(x + y) * r, y + Math.cos(x - y) * r];\n}\n\nexport default class Delaunay {\n  constructor(points) {\n    this._delaunator = new Delaunator(points);\n    this.inedges = new Int32Array(points.length / 2);\n    this._hullIndex = new Int32Array(points.length / 2);\n    this.points = this._delaunator.coords;\n    this._init();\n  }\n  update() {\n    this._delaunator.update();\n    this._init();\n    return this;\n  }\n  _init() {\n    const d = this._delaunator, points = this.points;\n\n    // check for collinear\n    if (d.hull && d.hull.length > 2 && area(d.hull, points) < 1e-10) {\n      this.collinear = Int32Array.from({length: points.length/2}, (_,i) => i)\n        .sort((i, j) => points[2 * i] - points[2 * j] || points[2 * i + 1] - points[2 * j + 1]); // for exact neighbors\n      const e = this.collinear[0], f = this.collinear[this.collinear.length - 1],\n        bounds = [ points[2 * e], points[2 * e + 1], points[2 * f], points[2 * f + 1] ],\n        r = 1e-8 * Math.sqrt((bounds[3] - bounds[1])**2 + (bounds[2] - bounds[0])**2);\n      for (let i = 0, n = points.length / 2; i < n; ++i) {\n        const p = jitter(points[2 * i], points[2 * i + 1], r);\n        points[2 * i] = p[0];\n        points[2 * i + 1] = p[1];\n      }\n      this._delaunator = new Delaunator(points);\n    } else {\n      delete this.collinear;\n    }\n\n    const halfedges = this.halfedges = this._delaunator.halfedges;\n    const hull = this.hull = this._delaunator.hull;\n    const triangles = this.triangles = this._delaunator.triangles;\n    const inedges = this.inedges.fill(-1);\n    const hullIndex = this._hullIndex.fill(-1);\n\n    // Compute an index from each point to an (arbitrary) incoming halfedge\n    // Used to give the first neighbor of each point; for this reason,\n    // on the hull we give priority to exterior halfedges\n    for (let e = 0, n = halfedges.length; e < n; ++e) {\n      const p = triangles[e % 3 === 2 ? e - 2 : e + 1];\n      if (halfedges[e] === -1 || inedges[p] === -1) inedges[p] = e;\n    }\n    for (let i = 0, n = hull.length; i < n; ++i) {\n      hullIndex[hull[i]] = i;\n    }\n\n    // degenerate case: 1 or 2 (distinct) points\n    if (hull.length <= 2 && hull.length > 0) {\n      this.triangles = new Int32Array(3).fill(-1);\n      this.halfedges = new Int32Array(3).fill(-1);\n      this.triangles[0] = hull[0];\n      this.triangles[1] = hull[1];\n      this.triangles[2] = hull[1];\n      inedges[hull[0]] = 1;\n      if (hull.length === 2) inedges[hull[1]] = 0;\n    }\n  }\n  voronoi(bounds) {\n    return new Voronoi(this, bounds);\n  }\n  *neighbors(i) {\n    const {inedges, hull, _hullIndex, halfedges, triangles} = this;\n\n    // degenerate case with several collinear points\n    if (this.collinear) {\n      const l = this.collinear.indexOf(i);\n      if (l > 0) yield this.collinear[l - 1];\n      if (l < this.collinear.length - 1) yield this.collinear[l + 1];\n      return;\n    }\n\n    const e0 = inedges[i];\n    if (e0 === -1) return; // coincident point\n    let e = e0, p0 = -1;\n    do {\n      yield p0 = triangles[e];\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) return; // bad triangulation\n      e = halfedges[e];\n      if (e === -1) {\n        const p = hull[(_hullIndex[i] + 1) % hull.length];\n        if (p !== p0) yield p;\n        return;\n      }\n    } while (e !== e0);\n  }\n  find(x, y, i = 0) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return -1;\n    const i0 = i;\n    let c;\n    while ((c = this._step(i, x, y)) >= 0 && c !== i && c !== i0) i = c;\n    return c;\n  }\n  _step(i, x, y) {\n    const {inedges, hull, _hullIndex, halfedges, triangles, points} = this;\n    if (inedges[i] === -1 || !points.length) return (i + 1) % (points.length >> 1);\n    let c = i;\n    let dc = (x - points[i * 2]) ** 2 + (y - points[i * 2 + 1]) ** 2;\n    const e0 = inedges[i];\n    let e = e0;\n    do {\n      let t = triangles[e];\n      const dt = (x - points[t * 2]) ** 2 + (y - points[t * 2 + 1]) ** 2;\n      if (dt < dc) dc = dt, c = t;\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) break; // bad triangulation\n      e = halfedges[e];\n      if (e === -1) {\n        e = hull[(_hullIndex[i] + 1) % hull.length];\n        if (e !== t) {\n          if ((x - points[e * 2]) ** 2 + (y - points[e * 2 + 1]) ** 2 < dc) return e;\n        }\n        break;\n      }\n    } while (e !== e0);\n    return c;\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, halfedges, triangles} = this;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = triangles[i] * 2;\n      const tj = triangles[j] * 2;\n      context.moveTo(points[ti], points[ti + 1]);\n      context.lineTo(points[tj], points[tj + 1]);\n    }\n    this.renderHull(context);\n    return buffer && buffer.value();\n  }\n  renderPoints(context, r = 2) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points} = this;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i], y = points[i + 1];\n      context.moveTo(x + r, y);\n      context.arc(x, y, r, 0, tau);\n    }\n    return buffer && buffer.value();\n  }\n  renderHull(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {hull, points} = this;\n    const h = hull[0] * 2, n = hull.length;\n    context.moveTo(points[h], points[h + 1]);\n    for (let i = 1; i < n; ++i) {\n      const h = 2 * hull[i];\n      context.lineTo(points[h], points[h + 1]);\n    }\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  hullPolygon() {\n    const polygon = new Polygon;\n    this.renderHull(polygon);\n    return polygon.value();\n  }\n  renderTriangle(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, triangles} = this;\n    const t0 = triangles[i *= 3] * 2;\n    const t1 = triangles[i + 1] * 2;\n    const t2 = triangles[i + 2] * 2;\n    context.moveTo(points[t0], points[t0 + 1]);\n    context.lineTo(points[t1], points[t1 + 1]);\n    context.lineTo(points[t2], points[t2 + 1]);\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *trianglePolygons() {\n    const {triangles} = this;\n    for (let i = 0, n = triangles.length / 3; i < n; ++i) {\n      yield this.trianglePolygon(i);\n    }\n  }\n  trianglePolygon(i) {\n    const polygon = new Polygon;\n    this.renderTriangle(i, polygon);\n    return polygon.value();\n  }\n}\n\nDelaunay.from = function(points, fx = pointX, fy = pointY, that) {\n  return new Delaunay(\"length\" in points\n      ? flatArray(points, fx, fy, that)\n      : Float64Array.from(flatIterable(points, fx, fy, that)));\n};\n\nfunction flatArray(points, fx, fy, that) {\n  const n = points.length;\n  const array = new Float64Array(n * 2);\n  for (let i = 0; i < n; ++i) {\n    const p = points[i];\n    array[i * 2] = fx.call(that, p, i, points);\n    array[i * 2 + 1] = fy.call(that, p, i, points);\n  }\n  return array;\n}\n\nfunction* flatIterable(points, fx, fy, that) {\n  let i = 0;\n  for (const p of points) {\n    yield fx.call(that, p, i, points);\n    yield fy.call(that, p, i, points);\n    ++i;\n  }\n}\n","export {default as Delaunay} from \"./delaunay.js\";\nexport {default as Voronoi} from \"./voronoi.js\";\n","export function lerp(a0: number, a1: number, t: number): number {\r\n    return (1.0 - t)*a0 + t*a1\r\n}","export function bound01(n, max) {\n    if (isOnePointZero(n)) {\n        n = '100%';\n    }\n    var processPercent = isPercentage(n);\n    n = max === 360 ? n : Math.min(max, Math.max(0, parseFloat(n)));\n    if (processPercent) {\n        n = parseInt(String(n * max), 10) / 100;\n    }\n    if (Math.abs(n - max) < 0.000001) {\n        return 1;\n    }\n    if (max === 360) {\n        n = (n < 0 ? (n % max) + max : n % max) / parseFloat(String(max));\n    }\n    else {\n        n = (n % max) / parseFloat(String(max));\n    }\n    return n;\n}\nexport function clamp01(val) {\n    return Math.min(1, Math.max(0, val));\n}\nexport function isOnePointZero(n) {\n    return typeof n === 'string' && n.includes('.') && parseFloat(n) === 1;\n}\nexport function isPercentage(n) {\n    return typeof n === 'string' && n.includes('%');\n}\nexport function boundAlpha(a) {\n    a = parseFloat(a);\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n    return a;\n}\nexport function convertToPercentage(n) {\n    if (n <= 1) {\n        return Number(n) * 100 + \"%\";\n    }\n    return n;\n}\nexport function pad2(c) {\n    return c.length === 1 ? '0' + c : String(c);\n}\n","import { bound01, pad2 } from './util';\nexport function rgbToRgb(r, g, b) {\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255,\n    };\n}\nexport function rgbToHsl(r, g, b) {\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h = 0;\n    var s = 0;\n    var l = (max + min) / 2;\n    if (max === min) {\n        s = 0;\n        h = 0;\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n            case r:\n                h = ((g - b) / d) + (g < b ? 6 : 0);\n                break;\n            case g:\n                h = ((b - r) / d) + 2;\n                break;\n            case b:\n                h = ((r - g) / d) + 4;\n                break;\n            default:\n                break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, l: l };\n}\nexport function hslToRgb(h, s, l) {\n    var r;\n    var g;\n    var b;\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n    function hue2rgb(p, q, t) {\n        if (t < 0) {\n            t += 1;\n        }\n        if (t > 1) {\n            t -= 1;\n        }\n        if (t < 1 / 6) {\n            return p + ((q - p) * (6 * t));\n        }\n        if (t < 1 / 2) {\n            return q;\n        }\n        if (t < 2 / 3) {\n            return p + ((q - p) * ((2 / 3) - t) * 6);\n        }\n        return p;\n    }\n    if (s === 0) {\n        g = l;\n        b = l;\n        r = l;\n    }\n    else {\n        var q = l < 0.5 ? (l * (1 + s)) : (l + s - (l * s));\n        var p = (2 * l) - q;\n        r = hue2rgb(p, q, h + (1 / 3));\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - (1 / 3));\n    }\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\nexport function rgbToHsv(r, g, b) {\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h = 0;\n    var v = max;\n    var d = max - min;\n    var s = max === 0 ? 0 : d / max;\n    if (max === min) {\n        h = 0;\n    }\n    else {\n        switch (max) {\n            case r:\n                h = ((g - b) / d) + (g < b ? 6 : 0);\n                break;\n            case g:\n                h = ((b - r) / d) + 2;\n                break;\n            case b:\n                h = ((r - g) / d) + 4;\n                break;\n            default:\n                break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\nexport function hsvToRgb(h, s, v) {\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n    var i = Math.floor(h);\n    var f = h - i;\n    var p = v * (1 - s);\n    var q = v * (1 - (f * s));\n    var t = v * (1 - ((1 - f) * s));\n    var mod = i % 6;\n    var r = [v, q, p, p, t, v][mod];\n    var g = [t, v, v, q, p, p][mod];\n    var b = [p, p, t, v, v, q][mod];\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\nexport function rgbToHex(r, g, b, allow3Char) {\n    var hex = [\n        pad2(Math.round(r).toString(16)),\n        pad2(Math.round(g).toString(16)),\n        pad2(Math.round(b).toString(16)),\n    ];\n    if (allow3Char &&\n        hex[0].charAt(0) === hex[0].charAt(1) &&\n        hex[1].charAt(0) === hex[1].charAt(1) &&\n        hex[2].charAt(0) === hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n    return hex.join('');\n}\nexport function rgbaToHex(r, g, b, a, allow4Char) {\n    var hex = [\n        pad2(Math.round(r).toString(16)),\n        pad2(Math.round(g).toString(16)),\n        pad2(Math.round(b).toString(16)),\n        pad2(convertDecimalToHex(a)),\n    ];\n    if (allow4Char &&\n        hex[0].charAt(0) === hex[0].charAt(1) &&\n        hex[1].charAt(0) === hex[1].charAt(1) &&\n        hex[2].charAt(0) === hex[2].charAt(1) &&\n        hex[3].charAt(0) === hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n    return hex.join('');\n}\nexport function rgbaToArgbHex(r, g, b, a) {\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(Math.round(r).toString(16)),\n        pad2(Math.round(g).toString(16)),\n        pad2(Math.round(b).toString(16)),\n    ];\n    return hex.join('');\n}\nexport function convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\nexport function convertHexToDecimal(h) {\n    return parseIntFromHex(h) / 255;\n}\nexport function parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n","export var names = {\n    aliceblue: '#f0f8ff',\n    antiquewhite: '#faebd7',\n    aqua: '#00ffff',\n    aquamarine: '#7fffd4',\n    azure: '#f0ffff',\n    beige: '#f5f5dc',\n    bisque: '#ffe4c4',\n    black: '#000000',\n    blanchedalmond: '#ffebcd',\n    blue: '#0000ff',\n    blueviolet: '#8a2be2',\n    brown: '#a52a2a',\n    burlywood: '#deb887',\n    cadetblue: '#5f9ea0',\n    chartreuse: '#7fff00',\n    chocolate: '#d2691e',\n    coral: '#ff7f50',\n    cornflowerblue: '#6495ed',\n    cornsilk: '#fff8dc',\n    crimson: '#dc143c',\n    cyan: '#00ffff',\n    darkblue: '#00008b',\n    darkcyan: '#008b8b',\n    darkgoldenrod: '#b8860b',\n    darkgray: '#a9a9a9',\n    darkgreen: '#006400',\n    darkgrey: '#a9a9a9',\n    darkkhaki: '#bdb76b',\n    darkmagenta: '#8b008b',\n    darkolivegreen: '#556b2f',\n    darkorange: '#ff8c00',\n    darkorchid: '#9932cc',\n    darkred: '#8b0000',\n    darksalmon: '#e9967a',\n    darkseagreen: '#8fbc8f',\n    darkslateblue: '#483d8b',\n    darkslategray: '#2f4f4f',\n    darkslategrey: '#2f4f4f',\n    darkturquoise: '#00ced1',\n    darkviolet: '#9400d3',\n    deeppink: '#ff1493',\n    deepskyblue: '#00bfff',\n    dimgray: '#696969',\n    dimgrey: '#696969',\n    dodgerblue: '#1e90ff',\n    firebrick: '#b22222',\n    floralwhite: '#fffaf0',\n    forestgreen: '#228b22',\n    fuchsia: '#ff00ff',\n    gainsboro: '#dcdcdc',\n    ghostwhite: '#f8f8ff',\n    gold: '#ffd700',\n    goldenrod: '#daa520',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#adff2f',\n    grey: '#808080',\n    honeydew: '#f0fff0',\n    hotpink: '#ff69b4',\n    indianred: '#cd5c5c',\n    indigo: '#4b0082',\n    ivory: '#fffff0',\n    khaki: '#f0e68c',\n    lavender: '#e6e6fa',\n    lavenderblush: '#fff0f5',\n    lawngreen: '#7cfc00',\n    lemonchiffon: '#fffacd',\n    lightblue: '#add8e6',\n    lightcoral: '#f08080',\n    lightcyan: '#e0ffff',\n    lightgoldenrodyellow: '#fafad2',\n    lightgray: '#d3d3d3',\n    lightgreen: '#90ee90',\n    lightgrey: '#d3d3d3',\n    lightpink: '#ffb6c1',\n    lightsalmon: '#ffa07a',\n    lightseagreen: '#20b2aa',\n    lightskyblue: '#87cefa',\n    lightslategray: '#778899',\n    lightslategrey: '#778899',\n    lightsteelblue: '#b0c4de',\n    lightyellow: '#ffffe0',\n    lime: '#00ff00',\n    limegreen: '#32cd32',\n    linen: '#faf0e6',\n    magenta: '#ff00ff',\n    maroon: '#800000',\n    mediumaquamarine: '#66cdaa',\n    mediumblue: '#0000cd',\n    mediumorchid: '#ba55d3',\n    mediumpurple: '#9370db',\n    mediumseagreen: '#3cb371',\n    mediumslateblue: '#7b68ee',\n    mediumspringgreen: '#00fa9a',\n    mediumturquoise: '#48d1cc',\n    mediumvioletred: '#c71585',\n    midnightblue: '#191970',\n    mintcream: '#f5fffa',\n    mistyrose: '#ffe4e1',\n    moccasin: '#ffe4b5',\n    navajowhite: '#ffdead',\n    navy: '#000080',\n    oldlace: '#fdf5e6',\n    olive: '#808000',\n    olivedrab: '#6b8e23',\n    orange: '#ffa500',\n    orangered: '#ff4500',\n    orchid: '#da70d6',\n    palegoldenrod: '#eee8aa',\n    palegreen: '#98fb98',\n    paleturquoise: '#afeeee',\n    palevioletred: '#db7093',\n    papayawhip: '#ffefd5',\n    peachpuff: '#ffdab9',\n    peru: '#cd853f',\n    pink: '#ffc0cb',\n    plum: '#dda0dd',\n    powderblue: '#b0e0e6',\n    purple: '#800080',\n    rebeccapurple: '#663399',\n    red: '#ff0000',\n    rosybrown: '#bc8f8f',\n    royalblue: '#4169e1',\n    saddlebrown: '#8b4513',\n    salmon: '#fa8072',\n    sandybrown: '#f4a460',\n    seagreen: '#2e8b57',\n    seashell: '#fff5ee',\n    sienna: '#a0522d',\n    silver: '#c0c0c0',\n    skyblue: '#87ceeb',\n    slateblue: '#6a5acd',\n    slategray: '#708090',\n    slategrey: '#708090',\n    snow: '#fffafa',\n    springgreen: '#00ff7f',\n    steelblue: '#4682b4',\n    tan: '#d2b48c',\n    teal: '#008080',\n    thistle: '#d8bfd8',\n    tomato: '#ff6347',\n    turquoise: '#40e0d0',\n    violet: '#ee82ee',\n    wheat: '#f5deb3',\n    white: '#ffffff',\n    whitesmoke: '#f5f5f5',\n    yellow: '#ffff00',\n    yellowgreen: '#9acd32',\n};\n","import { convertHexToDecimal, hslToRgb, hsvToRgb, parseIntFromHex, rgbToRgb } from './conversion';\nimport { names } from './css-color-names';\nimport { boundAlpha, convertToPercentage } from './util';\nexport function inputToRGB(color) {\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n    if (typeof color === 'string') {\n        color = stringInputToObject(color);\n    }\n    if (typeof color === 'object') {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === '%' ? 'prgb' : 'rgb';\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = 'hsv';\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = 'hsl';\n        }\n        if (Object.prototype.hasOwnProperty.call(color, 'a')) {\n            a = color.a;\n        }\n    }\n    a = boundAlpha(a);\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: Math.min(255, Math.max(rgb.r, 0)),\n        g: Math.min(255, Math.max(rgb.g, 0)),\n        b: Math.min(255, Math.max(rgb.b, 0)),\n        a: a,\n    };\n}\nvar CSS_INTEGER = '[-\\\\+]?\\\\d+%?';\nvar CSS_NUMBER = '[-\\\\+]?\\\\d*\\\\.\\\\d+%?';\nvar CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\nvar PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\nvar PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\nvar matchers = {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp('rgb' + PERMISSIVE_MATCH3),\n    rgba: new RegExp('rgba' + PERMISSIVE_MATCH4),\n    hsl: new RegExp('hsl' + PERMISSIVE_MATCH3),\n    hsla: new RegExp('hsla' + PERMISSIVE_MATCH4),\n    hsv: new RegExp('hsv' + PERMISSIVE_MATCH3),\n    hsva: new RegExp('hsva' + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n};\nexport function stringInputToObject(color) {\n    color = color.trim().toLowerCase();\n    if (color.length === 0) {\n        return false;\n    }\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color === 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: 'name' };\n    }\n    var match = matchers.rgb.exec(color);\n    if (match) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    match = matchers.rgba.exec(color);\n    if (match) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    match = matchers.hsl.exec(color);\n    if (match) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    match = matchers.hsla.exec(color);\n    if (match) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    match = matchers.hsv.exec(color);\n    if (match) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    match = matchers.hsva.exec(color);\n    if (match) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    match = matchers.hex8.exec(color);\n    if (match) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? 'name' : 'hex8',\n        };\n    }\n    match = matchers.hex6.exec(color);\n    if (match) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? 'name' : 'hex',\n        };\n    }\n    match = matchers.hex4.exec(color);\n    if (match) {\n        return {\n            r: parseIntFromHex(match[1] + match[1]),\n            g: parseIntFromHex(match[2] + match[2]),\n            b: parseIntFromHex(match[3] + match[3]),\n            a: convertHexToDecimal(match[4] + match[4]),\n            format: named ? 'name' : 'hex8',\n        };\n    }\n    match = matchers.hex3.exec(color);\n    if (match) {\n        return {\n            r: parseIntFromHex(match[1] + match[1]),\n            g: parseIntFromHex(match[2] + match[2]),\n            b: parseIntFromHex(match[3] + match[3]),\n            format: named ? 'name' : 'hex',\n        };\n    }\n    return false;\n}\nexport function isValidCSSUnit(color) {\n    return Boolean(matchers.CSS_UNIT.exec(String(color)));\n}\n","import { rgbaToHex, rgbToHex, rgbToHsl, rgbToHsv } from './conversion';\nimport { names } from './css-color-names';\nimport { inputToRGB } from './format-input';\nimport { bound01, boundAlpha, clamp01 } from './util';\nvar TinyColor = (function () {\n    function TinyColor(color, opts) {\n        if (color === void 0) { color = ''; }\n        if (opts === void 0) { opts = {}; }\n        if (color instanceof TinyColor) {\n            return color;\n        }\n        this.originalInput = color;\n        var rgb = inputToRGB(color);\n        this.originalInput = color;\n        this.r = rgb.r;\n        this.g = rgb.g;\n        this.b = rgb.b;\n        this.a = rgb.a;\n        this.roundA = Math.round(100 * this.a) / 100;\n        this.format = opts.format || rgb.format;\n        this.gradientType = opts.gradientType;\n        if (this.r < 1) {\n            this.r = Math.round(this.r);\n        }\n        if (this.g < 1) {\n            this.g = Math.round(this.g);\n        }\n        if (this.b < 1) {\n            this.b = Math.round(this.b);\n        }\n        this.isValid = rgb.ok;\n    }\n    TinyColor.prototype.isDark = function () {\n        return this.getBrightness() < 128;\n    };\n    TinyColor.prototype.isLight = function () {\n        return !this.isDark();\n    };\n    TinyColor.prototype.getBrightness = function () {\n        var rgb = this.toRgb();\n        return ((rgb.r * 299) + (rgb.g * 587) + (rgb.b * 114)) / 1000;\n    };\n    TinyColor.prototype.getLuminance = function () {\n        var rgb = this.toRgb();\n        var R;\n        var G;\n        var B;\n        var RsRGB = rgb.r / 255;\n        var GsRGB = rgb.g / 255;\n        var BsRGB = rgb.b / 255;\n        if (RsRGB <= 0.03928) {\n            R = RsRGB / 12.92;\n        }\n        else {\n            R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n        }\n        if (GsRGB <= 0.03928) {\n            G = GsRGB / 12.92;\n        }\n        else {\n            G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n        }\n        if (BsRGB <= 0.03928) {\n            B = BsRGB / 12.92;\n        }\n        else {\n            B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n        }\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    };\n    TinyColor.prototype.getAlpha = function () {\n        return this.a;\n    };\n    TinyColor.prototype.setAlpha = function (alpha) {\n        this.a = boundAlpha(alpha);\n        this.roundA = Math.round(100 * this.a) / 100;\n        return this;\n    };\n    TinyColor.prototype.toHsv = function () {\n        var hsv = rgbToHsv(this.r, this.g, this.b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this.a };\n    };\n    TinyColor.prototype.toHsvString = function () {\n        var hsv = rgbToHsv(this.r, this.g, this.b);\n        var h = Math.round(hsv.h * 360);\n        var s = Math.round(hsv.s * 100);\n        var v = Math.round(hsv.v * 100);\n        return this.a === 1 ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\" : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this.roundA + \")\";\n    };\n    TinyColor.prototype.toHsl = function () {\n        var hsl = rgbToHsl(this.r, this.g, this.b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this.a };\n    };\n    TinyColor.prototype.toHslString = function () {\n        var hsl = rgbToHsl(this.r, this.g, this.b);\n        var h = Math.round(hsl.h * 360);\n        var s = Math.round(hsl.s * 100);\n        var l = Math.round(hsl.l * 100);\n        return this.a === 1 ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\" : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this.roundA + \")\";\n    };\n    TinyColor.prototype.toHex = function (allow3Char) {\n        if (allow3Char === void 0) { allow3Char = false; }\n        return rgbToHex(this.r, this.g, this.b, allow3Char);\n    };\n    TinyColor.prototype.toHexString = function (allow3Char) {\n        if (allow3Char === void 0) { allow3Char = false; }\n        return '#' + this.toHex(allow3Char);\n    };\n    TinyColor.prototype.toHex8 = function (allow4Char) {\n        if (allow4Char === void 0) { allow4Char = false; }\n        return rgbaToHex(this.r, this.g, this.b, this.a, allow4Char);\n    };\n    TinyColor.prototype.toHex8String = function (allow4Char) {\n        if (allow4Char === void 0) { allow4Char = false; }\n        return '#' + this.toHex8(allow4Char);\n    };\n    TinyColor.prototype.toRgb = function () {\n        return {\n            r: Math.round(this.r),\n            g: Math.round(this.g),\n            b: Math.round(this.b),\n            a: this.a,\n        };\n    };\n    TinyColor.prototype.toRgbString = function () {\n        var r = Math.round(this.r);\n        var g = Math.round(this.g);\n        var b = Math.round(this.b);\n        return this.a === 1 ? \"rgb(\" + r + \", \" + g + \", \" + b + \")\" : \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + this.roundA + \")\";\n    };\n    TinyColor.prototype.toPercentageRgb = function () {\n        var fmt = function (x) { return Math.round(bound01(x, 255) * 100) + \"%\"; };\n        return {\n            r: fmt(this.r),\n            g: fmt(this.g),\n            b: fmt(this.b),\n            a: this.a,\n        };\n    };\n    TinyColor.prototype.toPercentageRgbString = function () {\n        var rnd = function (x) { return Math.round(bound01(x, 255) * 100); };\n        return this.a === 1 ?\n            \"rgb(\" + rnd(this.r) + \"%, \" + rnd(this.g) + \"%, \" + rnd(this.b) + \"%)\" :\n            \"rgba(\" + rnd(this.r) + \"%, \" + rnd(this.g) + \"%, \" + rnd(this.b) + \"%, \" + this.roundA + \")\";\n    };\n    TinyColor.prototype.toName = function () {\n        if (this.a === 0) {\n            return 'transparent';\n        }\n        if (this.a < 1) {\n            return false;\n        }\n        var hex = '#' + rgbToHex(this.r, this.g, this.b, false);\n        for (var _i = 0, _a = Object.keys(names); _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (names[key] === hex) {\n                return key;\n            }\n        }\n        return false;\n    };\n    TinyColor.prototype.toString = function (format) {\n        var formatSet = Boolean(format);\n        format = format || this.format;\n        var formattedString = false;\n        var hasAlpha = this.a < 1 && this.a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format.startsWith('hex') || format === 'name');\n        if (needsAlphaFormat) {\n            if (format === 'name' && this.a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === 'rgb') {\n            formattedString = this.toRgbString();\n        }\n        if (format === 'prgb') {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === 'hex' || format === 'hex6') {\n            formattedString = this.toHexString();\n        }\n        if (format === 'hex3') {\n            formattedString = this.toHexString(true);\n        }\n        if (format === 'hex4') {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === 'hex8') {\n            formattedString = this.toHex8String();\n        }\n        if (format === 'name') {\n            formattedString = this.toName();\n        }\n        if (format === 'hsl') {\n            formattedString = this.toHslString();\n        }\n        if (format === 'hsv') {\n            formattedString = this.toHsvString();\n        }\n        return formattedString || this.toHexString();\n    };\n    TinyColor.prototype.clone = function () {\n        return new TinyColor(this.toString());\n    };\n    TinyColor.prototype.lighten = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        var hsl = this.toHsl();\n        hsl.l += amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return new TinyColor(hsl);\n    };\n    TinyColor.prototype.brighten = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        var rgb = this.toRgb();\n        rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n        rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n        rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n        return new TinyColor(rgb);\n    };\n    TinyColor.prototype.darken = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        var hsl = this.toHsl();\n        hsl.l -= amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return new TinyColor(hsl);\n    };\n    TinyColor.prototype.tint = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        return this.mix('white', amount);\n    };\n    TinyColor.prototype.shade = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        return this.mix('black', amount);\n    };\n    TinyColor.prototype.desaturate = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        var hsl = this.toHsl();\n        hsl.s -= amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return new TinyColor(hsl);\n    };\n    TinyColor.prototype.saturate = function (amount) {\n        if (amount === void 0) { amount = 10; }\n        var hsl = this.toHsl();\n        hsl.s += amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return new TinyColor(hsl);\n    };\n    TinyColor.prototype.greyscale = function () {\n        return this.desaturate(100);\n    };\n    TinyColor.prototype.spin = function (amount) {\n        var hsl = this.toHsl();\n        var hue = (hsl.h + amount) % 360;\n        hsl.h = hue < 0 ? 360 + hue : hue;\n        return new TinyColor(hsl);\n    };\n    TinyColor.prototype.mix = function (color, amount) {\n        if (amount === void 0) { amount = 50; }\n        var rgb1 = this.toRgb();\n        var rgb2 = new TinyColor(color).toRgb();\n        var p = amount / 100;\n        var rgba = {\n            r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n            g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n            b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n            a: ((rgb2.a - rgb1.a) * p) + rgb1.a,\n        };\n        return new TinyColor(rgba);\n    };\n    TinyColor.prototype.analogous = function (results, slices) {\n        if (results === void 0) { results = 6; }\n        if (slices === void 0) { slices = 30; }\n        var hsl = this.toHsl();\n        var part = 360 / slices;\n        var ret = [this];\n        for (hsl.h = (hsl.h - ((part * results) >> 1) + 720) % 360; --results;) {\n            hsl.h = (hsl.h + part) % 360;\n            ret.push(new TinyColor(hsl));\n        }\n        return ret;\n    };\n    TinyColor.prototype.complement = function () {\n        var hsl = this.toHsl();\n        hsl.h = (hsl.h + 180) % 360;\n        return new TinyColor(hsl);\n    };\n    TinyColor.prototype.monochromatic = function (results) {\n        if (results === void 0) { results = 6; }\n        var hsv = this.toHsv();\n        var h = hsv.h;\n        var s = hsv.s;\n        var v = hsv.v;\n        var res = [];\n        var modification = 1 / results;\n        while (results--) {\n            res.push(new TinyColor({ h: h, s: s, v: v }));\n            v = (v + modification) % 1;\n        }\n        return res;\n    };\n    TinyColor.prototype.splitcomplement = function () {\n        var hsl = this.toHsl();\n        var h = hsl.h;\n        return [\n            this,\n            new TinyColor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l }),\n            new TinyColor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l }),\n        ];\n    };\n    TinyColor.prototype.triad = function () {\n        return this.polyad(3);\n    };\n    TinyColor.prototype.tetrad = function () {\n        return this.polyad(4);\n    };\n    TinyColor.prototype.polyad = function (n) {\n        var hsl = this.toHsl();\n        var h = hsl.h;\n        var result = [this];\n        var increment = 360 / n;\n        for (var i = 1; i < n; i++) {\n            result.push(new TinyColor({ h: (h + (i * increment)) % 360, s: hsl.s, l: hsl.l }));\n        }\n        return result;\n    };\n    TinyColor.prototype.equals = function (color) {\n        return this.toRgbString() === new TinyColor(color).toRgbString();\n    };\n    return TinyColor;\n}());\nexport { TinyColor };\nexport function tinycolor(color, opts) {\n    if (color === void 0) { color = ''; }\n    if (opts === void 0) { opts = {}; }\n    return new TinyColor(color, opts);\n}\n","import { TinyColor } from './index';\nexport function readability(color1, color2) {\n    var c1 = new TinyColor(color1);\n    var c2 = new TinyColor(color2);\n    return ((Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) /\n        (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05));\n}\nexport function isReadable(color1, color2, wcag2) {\n    if (wcag2 === void 0) { wcag2 = { level: 'AA', size: 'small' }; }\n    var readabilityLevel = readability(color1, color2);\n    switch ((wcag2.level || 'AA') + (wcag2.size || 'small')) {\n        case 'AAsmall':\n        case 'AAAlarge':\n            return readabilityLevel >= 4.5;\n        case 'AAlarge':\n            return readabilityLevel >= 3;\n        case 'AAAsmall':\n            return readabilityLevel >= 7;\n        default:\n            return false;\n    }\n}\nexport function mostReadable(baseColor, colorList, args) {\n    if (args === void 0) { args = { includeFallbackColors: false, level: 'AA', size: 'small' }; }\n    var bestColor = null;\n    var bestScore = 0;\n    var includeFallbackColors = args.includeFallbackColors, level = args.level, size = args.size;\n    for (var _i = 0, colorList_1 = colorList; _i < colorList_1.length; _i++) {\n        var color = colorList_1[_i];\n        var score = readability(baseColor, color);\n        if (score > bestScore) {\n            bestScore = score;\n            bestColor = new TinyColor(color);\n        }\n    }\n    if (isReadable(baseColor, bestColor, { level: level, size: size }) || !includeFallbackColors) {\n        return bestColor;\n    }\n    args.includeFallbackColors = false;\n    return mostReadable(baseColor, ['#fff', '#000'], args);\n}\n","import { rgbaToArgbHex } from './conversion';\nimport { TinyColor } from './index';\nexport function toMsFilter(firstColor, secondColor) {\n    var color = new TinyColor(firstColor);\n    var hex8String = '#' + rgbaToArgbHex(color.r, color.g, color.b, color.a);\n    var secondHex8String = hex8String;\n    var gradientType = color.gradientType ? 'GradientType = 1, ' : '';\n    if (secondColor) {\n        var s = new TinyColor(secondColor);\n        secondHex8String = '#' + rgbaToArgbHex(s.r, s.g, s.b, s.a);\n    }\n    return \"progid:DXImageTransform.Microsoft.gradient(\" + gradientType + \"startColorstr=\" + hex8String + \",endColorstr=\" + secondHex8String + \")\";\n}\n","import { TinyColor } from './index';\nimport { convertToPercentage } from './util';\nexport function fromRatio(ratio, opts) {\n    var newColor = {\n        r: convertToPercentage(ratio.r),\n        g: convertToPercentage(ratio.g),\n        b: convertToPercentage(ratio.b),\n    };\n    if (ratio.a !== undefined) {\n        newColor.a = Number(ratio.a);\n    }\n    return new TinyColor(newColor, opts);\n}\nexport function legacyRandom() {\n    return new TinyColor({\n        r: Math.random(),\n        g: Math.random(),\n        b: Math.random(),\n    });\n}\n","import { TinyColor } from './index';\nexport function random(options) {\n    if (options === void 0) { options = {}; }\n    if (options.count !== undefined && options.count !== null) {\n        var totalColors = options.count;\n        var colors = [];\n        options.count = undefined;\n        while (totalColors > colors.length) {\n            options.count = null;\n            if (options.seed) {\n                options.seed += 1;\n            }\n            colors.push(random(options));\n        }\n        options.count = totalColors;\n        return colors;\n    }\n    var h = pickHue(options.hue, options.seed);\n    var s = pickSaturation(h, options);\n    var v = pickBrightness(h, s, options);\n    var res = { h: h, s: s, v: v };\n    if (options.alpha !== undefined) {\n        res.a = options.alpha;\n    }\n    return new TinyColor(res);\n}\nfunction pickHue(hue, seed) {\n    var hueRange = getHueRange(hue);\n    var res = randomWithin(hueRange, seed);\n    if (res < 0) {\n        res = 360 + res;\n    }\n    return res;\n}\nfunction pickSaturation(hue, options) {\n    if (options.hue === 'monochrome') {\n        return 0;\n    }\n    if (options.luminosity === 'random') {\n        return randomWithin([0, 100], options.seed);\n    }\n    var saturationRange = getColorInfo(hue).saturationRange;\n    var sMin = saturationRange[0];\n    var sMax = saturationRange[1];\n    switch (options.luminosity) {\n        case 'bright':\n            sMin = 55;\n            break;\n        case 'dark':\n            sMin = sMax - 10;\n            break;\n        case 'light':\n            sMax = 55;\n            break;\n        default:\n            break;\n    }\n    return randomWithin([sMin, sMax], options.seed);\n}\nfunction pickBrightness(H, S, options) {\n    var bMin = getMinimumBrightness(H, S);\n    var bMax = 100;\n    switch (options.luminosity) {\n        case 'dark':\n            bMax = bMin + 20;\n            break;\n        case 'light':\n            bMin = (bMax + bMin) / 2;\n            break;\n        case 'random':\n            bMin = 0;\n            bMax = 100;\n            break;\n        default:\n            break;\n    }\n    return randomWithin([bMin, bMax], options.seed);\n}\nfunction getMinimumBrightness(H, S) {\n    var lowerBounds = getColorInfo(H).lowerBounds;\n    for (var i = 0; i < lowerBounds.length - 1; i++) {\n        var s1 = lowerBounds[i][0];\n        var v1 = lowerBounds[i][1];\n        var s2 = lowerBounds[i + 1][0];\n        var v2 = lowerBounds[i + 1][1];\n        if (S >= s1 && S <= s2) {\n            var m = (v2 - v1) / (s2 - s1);\n            var b = v1 - (m * s1);\n            return (m * S) + b;\n        }\n    }\n    return 0;\n}\nfunction getHueRange(colorInput) {\n    var num = parseInt(colorInput, 10);\n    if (!Number.isNaN(num) && num < 360 && num > 0) {\n        return [num, num];\n    }\n    if (typeof colorInput === 'string') {\n        var namedColor = bounds.find(function (n) { return n.name === colorInput; });\n        if (namedColor) {\n            var color = defineColor(namedColor);\n            if (color.hueRange) {\n                return color.hueRange;\n            }\n        }\n        var parsed = new TinyColor(colorInput);\n        if (parsed.isValid) {\n            var hue = parsed.toHsv().h;\n            return [hue, hue];\n        }\n    }\n    return [0, 360];\n}\nfunction getColorInfo(hue) {\n    if (hue >= 334 && hue <= 360) {\n        hue -= 360;\n    }\n    for (var _i = 0, bounds_1 = bounds; _i < bounds_1.length; _i++) {\n        var bound = bounds_1[_i];\n        var color = defineColor(bound);\n        if (color.hueRange && hue >= color.hueRange[0] && hue <= color.hueRange[1]) {\n            return color;\n        }\n    }\n    throw Error('Color not found');\n}\nfunction randomWithin(range, seed) {\n    if (seed === undefined) {\n        return Math.floor(range[0] + (Math.random() * (range[1] + 1 - range[0])));\n    }\n    var max = range[1] || 1;\n    var min = range[0] || 0;\n    seed = ((seed * 9301) + 49297) % 233280;\n    var rnd = seed / 233280.0;\n    return Math.floor(min + (rnd * (max - min)));\n}\nfunction defineColor(bound) {\n    var sMin = bound.lowerBounds[0][0];\n    var sMax = bound.lowerBounds[bound.lowerBounds.length - 1][0];\n    var bMin = bound.lowerBounds[bound.lowerBounds.length - 1][1];\n    var bMax = bound.lowerBounds[0][1];\n    return {\n        name: bound.name,\n        hueRange: bound.hueRange,\n        lowerBounds: bound.lowerBounds,\n        saturationRange: [sMin, sMax],\n        brightnessRange: [bMin, bMax],\n    };\n}\nexport var bounds = [\n    {\n        name: 'monochrome',\n        hueRange: null,\n        lowerBounds: [[0, 0], [100, 0]],\n    },\n    {\n        name: 'red',\n        hueRange: [-26, 18],\n        lowerBounds: [\n            [20, 100],\n            [30, 92],\n            [40, 89],\n            [50, 85],\n            [60, 78],\n            [70, 70],\n            [80, 60],\n            [90, 55],\n            [100, 50],\n        ],\n    },\n    {\n        name: 'orange',\n        hueRange: [19, 46],\n        lowerBounds: [[20, 100], [30, 93], [40, 88], [50, 86], [60, 85], [70, 70], [100, 70]],\n    },\n    {\n        name: 'yellow',\n        hueRange: [47, 62],\n        lowerBounds: [[25, 100], [40, 94], [50, 89], [60, 86], [70, 84], [80, 82], [90, 80], [100, 75]],\n    },\n    {\n        name: 'green',\n        hueRange: [63, 178],\n        lowerBounds: [[30, 100], [40, 90], [50, 85], [60, 81], [70, 74], [80, 64], [90, 50], [100, 40]],\n    },\n    {\n        name: 'blue',\n        hueRange: [179, 257],\n        lowerBounds: [\n            [20, 100],\n            [30, 86],\n            [40, 80],\n            [50, 74],\n            [60, 60],\n            [70, 52],\n            [80, 44],\n            [90, 39],\n            [100, 35],\n        ],\n    },\n    {\n        name: 'purple',\n        hueRange: [258, 282],\n        lowerBounds: [\n            [20, 100],\n            [30, 87],\n            [40, 79],\n            [50, 70],\n            [60, 65],\n            [70, 59],\n            [80, 52],\n            [90, 45],\n            [100, 42],\n        ],\n    },\n    {\n        name: 'pink',\n        hueRange: [283, 334],\n        lowerBounds: [[20, 100], [30, 90], [40, 86], [60, 84], [80, 80], [90, 75], [100, 73]],\n    },\n];\n","import { tinycolor } from './index';\nexport * from './index';\nexport * from './css-color-names';\nexport * from './readability';\nexport * from './to-ms-filter';\nexport * from './from-ratio';\nexport * from './format-input';\nexport * from './random';\nexport default tinycolor;\n","import { Vec2 } from \"./math/vec2\";\r\nimport { Delaunay, Voronoi } from \"d3-delaunay\";\r\nimport { lerp } from './math/mathf';\r\nimport { TinyColor } from '@ctrl/tinycolor';\r\n\r\nconst NUM_POINTS = 5000;\r\nconst WIDTH = 1280;\r\nconst HEIGHT = 720;\r\n\r\nconst NUM_PLATES = 10;\r\nconst PLATE_COLOR_MAP = [\r\n  \"black\",\r\n  \"blue\",\r\n  \"red\",\r\n  \"purple\",\r\n  \"green\",\r\n  \"teal\",\r\n  \"navy\",\r\n  \"yellow\",\r\n  \"magenta\",\r\n  \"white\",\r\n  \"pink\"\r\n];\r\nconst NUM_PLATE_STEPS = 20;\r\nconst PLATE_ANGLE_COS = 0;\r\nconst MAX_HEIGHT_DIFF = 5;\r\n\r\nconst WATER_ITERATIONS = 10000;\r\nconst RAIN_TRANSFER_AMT = 1;\r\nconst EROSION_AMT = 0.2;\r\nconst CYCLES_PER_EVAPORATION = 1000;\r\nconst EVAPORATION_AMT = 0.2;\r\n\r\nconst LINELESS = true;\r\n\r\ninterface IPoint {\r\n  loc: Vec2;\r\n  plateId: number;\r\n  height: number;\r\n  water: number;\r\n}\r\n\r\nfunction getTotalHeight(point: IPoint): number {\r\n  return point.height + point.water;\r\n}\r\n\r\nfunction smoothStep(a: number, b: number, t: number): number {\r\n  let new_t = t * t * (3 - 2 * t);\r\n  return lerp(a, b, new_t);\r\n}\r\n\r\nlet canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\r\nlet ctx = canvas.getContext(\"2d\");\r\n\r\nfunction choose<T>(arr: Array<T>): number {\r\n  return Math.floor(Math.random() * arr.length);\r\n}\r\n\r\nfunction generatePoints(): IPoint[] {\r\n  let res = new Array<IPoint>(NUM_POINTS);\r\n  for (let i = 0; i < NUM_POINTS; i++) {\r\n    res[i] = {\r\n      loc: {\r\n        x: Math.random() * WIDTH,\r\n        y: Math.random() * HEIGHT\r\n      },\r\n      plateId: -1,\r\n      height: 0,\r\n      water: 0,\r\n    };\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction dist(p1: Vec2, p2: Vec2): number {\r\n  return Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\r\n}\r\n\r\nfunction floodFill(points: IPoint[]): IPoint[] {\r\n  let unmapped_points = [...points];\r\n  let res = [];\r\n  for (let i = 0; i < NUM_PLATES; i++) {\r\n    let p_i = choose(unmapped_points);\r\n    let p = unmapped_points.splice(p_i, 1)[0];\r\n    p.plateId = i;\r\n    res.push(p);\r\n  }\r\n  while (unmapped_points.length > 0) {\r\n    let p_i = choose(unmapped_points);\r\n    let p = unmapped_points.splice(p_i, 1)[0];\r\n    let closest_i = -1;\r\n    let closest_dist = 0;\r\n    let rl = res.length;\r\n    for (let i = 0; i < rl; i++) {\r\n      let curr = res[i];\r\n      let d = dist(curr.loc, p.loc);\r\n      if (closest_i == -1 || d < closest_dist) {\r\n        closest_dist = d;\r\n        closest_i = i;\r\n      }\r\n    }\r\n    p.plateId = res[closest_i].plateId;\r\n    res.push(p);\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nfunction genNeighbors(voronoi: Voronoi<number[]>): number[][] {\r\n  let res = [];\r\n\r\n  let cells: number[][][] = [];\r\n  for (let i = 0; i < NUM_POINTS; i++) {\r\n    cells.push(voronoi.cellPolygon(i));\r\n  }\r\n\r\n  for (let i = 0; i < NUM_POINTS; i++) {\r\n    let cell_poly = cells[i];\r\n    let neighbor_cells = cells.map((val, idx) => ({val, idx})).filter(({val, idx}) => {\r\n      let matched_verts = val.filter(pnt => cell_poly.filter(pnt2 => pnt[0] == pnt2[0] && pnt[1] == pnt[1]).length > 0).length;\r\n      return (idx != i) && (matched_verts >= 2);\r\n    }).map(val => val.idx);\r\n    if (neighbor_cells.length == 0) {\r\n      console.error(\"Cell has no neighbors!\");\r\n    }\r\n    res.push(neighbor_cells);\r\n  }\r\n  \r\n  return res;\r\n}\r\n\r\nfunction getRandom(start, end) {\r\n  return Math.floor(Math.random() * (end - start + 1) + start)\r\n}\r\n\r\nfunction shuffleInPlace<T>(array: T[]): T[] {\r\n  // if it's 1 or 0 items, just return\r\n  if (array.length <= 1) return array;\r\n\r\n  // For each index in array\r\n  for (let i = 0; i < array.length; i++) {\r\n\r\n    // choose a random not-yet-placed item to place there\r\n    // must be an item AFTER the current item, because the stuff\r\n    // before has all already been placed\r\n    const randomChoiceIndex = getRandom(i, array.length - 1);\r\n\r\n    // place our random choice in the spot by swapping\r\n    [array[i], array[randomChoiceIndex]] = [array[randomChoiceIndex], array[i]];\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\n\r\nfunction range(start, end): number[] { return Array.from({length: (end - start)}, (v, k) => k + start); }\r\n\r\nfunction heightGen(voronoi: Voronoi<number[]>, points: IPoint[]): IPoint[] {\r\n  let plateDirections: Vec2[] = [];\r\n  for (let plate_idx = 0; plate_idx < NUM_PLATES; plate_idx++) {\r\n    plateDirections.push(new Vec2(\r\n      Math.random() * 2 - 1,\r\n       Math.random() * 2 - 1\r\n    ));\r\n  }\r\n\r\n  let neighbors = genNeighbors(voronoi);\r\n\r\n  let r = range(0, NUM_POINTS);\r\n\r\n  for (let i = 0; i < NUM_PLATE_STEPS; i++) {\r\n    shuffleInPlace(r);\r\n    for (let cell of r) {\r\n      let cell_point = points[cell];\r\n      let neighbor_cells = [...neighbors[cell]];\r\n      shuffleInPlace(neighbor_cells);\r\n      for (var neighbor_cell_idx of neighbor_cells) {\r\n        let neighbor_cell_point = points[neighbor_cell_idx];\r\n        let dir = new Vec2(\r\n          neighbor_cell_point.loc.x - cell_point.loc.x,\r\n          neighbor_cell_point.loc.y - cell_point.loc.y,\r\n        );\r\n        let cell_plate_dir = plateDirections[cell_point.plateId];\r\n        let dot = dir.x * cell_plate_dir.x + dir.y * cell_plate_dir.y;\r\n        if (dot > PLATE_ANGLE_COS) {\r\n          neighbor_cell_point.height++;\r\n          cell_point.height++;\r\n        } else if (dot < -PLATE_ANGLE_COS) {\r\n          neighbor_cell_point.height--;\r\n          cell_point.height--;\r\n        }\r\n\r\n        if (Math.abs(cell_point.height - neighbor_cell_point.height) > MAX_HEIGHT_DIFF) {\r\n          let avg = (cell_point.height + neighbor_cell_point.height) / 2;\r\n          cell_point.height = (cell_point.height + avg) / 2;\r\n          neighbor_cell_point.height = (neighbor_cell_point.height + avg) / 2;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return points;\r\n}\r\n\r\nfunction waterGen(voronoi: Voronoi<number[]>, points: IPoint[]): IPoint[] {\r\n  let neighbors = genNeighbors(voronoi);\r\n\r\n  let avg_height = points.reduce((agg, curr) => (curr.height + agg), points[0].height) / NUM_POINTS;\r\n  for (let r of range(0, NUM_POINTS)) {\r\n    let cell = points[r];\r\n    if (cell.height < avg_height) {\r\n      cell.water = avg_height - cell.height;\r\n    }\r\n  }\r\n\r\n  let r = range(0, NUM_POINTS);\r\n\r\n  for (let i = 0; i < WATER_ITERATIONS; i++) {\r\n    shuffleInPlace(r);\r\n\r\n    // Evaporation (only occurs every CYCLES_PER_EVAPORATION iteration)\r\n    if (i % CYCLES_PER_EVAPORATION == 0) {\r\n      let total_evaporation = 0;\r\n\r\n      for (let cell of r) {\r\n        let cell_point = points[cell];\r\n        if (cell_point.water > 0) {\r\n          let amt = (cell_point.water > EVAPORATION_AMT ? EVAPORATION_AMT : cell_point.water);\r\n          cell_point.water -= amt;\r\n          total_evaporation += amt;\r\n        }\r\n      }\r\n\r\n      let rainfall = total_evaporation / NUM_POINTS;\r\n      console.log(\"RAINFALL: \" + rainfall);\r\n\r\n      for (let cell of r) {\r\n        let cell_point = points[cell];\r\n        cell_point.water += rainfall;\r\n      }\r\n    }\r\n\r\n    for (let cell of r) {\r\n      let cell_point = points[cell];\r\n      let neighbor_cells = [...neighbors[cell]];\r\n      shuffleInPlace(neighbor_cells);\r\n            \r\n      if (cell_point.water > 0) {\r\n        // Water flows from a cell to its lowest neighbor if the cell\r\n        // (a) has water, and\r\n        // (b) the cell's height plus water is greater than the neighbor cell's height plus water\r\n        let min_neighbor = neighbor_cells.reduce((curr_min, neighbor_idx) => {\r\n          if (curr_min == undefined) { return points[neighbor_idx]; }\r\n          if (getTotalHeight(points[neighbor_idx]) < getTotalHeight(curr_min)) { return points[neighbor_idx] }\r\n          else { return curr_min }\r\n        }, undefined as IPoint | undefined);\r\n        if (min_neighbor === undefined) {\r\n          console.error(\"NEIGHBOR UNDEFINED???\");\r\n          console.log(neighbor_cells);\r\n          continue;\r\n        }\r\n\r\n        let transfer_diff = getTotalHeight(cell_point) - getTotalHeight(min_neighbor);\r\n        if (transfer_diff > 0) {\r\n          if (transfer_diff <= RAIN_TRANSFER_AMT) {\r\n            // Average the two heights\r\n            let avg_height = ((cell_point.height + cell_point.water) + (min_neighbor.height + min_neighbor.water)) / 2;\r\n            let transfer_amt = avg_height - (min_neighbor.height + min_neighbor.water);\r\n\r\n            if (transfer_amt < cell_point.water) {\r\n              transfer_amt = cell_point.water;\r\n            }\r\n\r\n            cell_point.water -= transfer_amt;\r\n            min_neighbor.water += transfer_amt;\r\n\r\n            let percent = transfer_amt / RAIN_TRANSFER_AMT;\r\n            // Erosion\r\n            cell_point.height -= EROSION_AMT * transfer_diff * percent;\r\n            min_neighbor.height += EROSION_AMT * transfer_diff * percent;\r\n          } else {\r\n            cell_point.water -= RAIN_TRANSFER_AMT;\r\n            min_neighbor.water += RAIN_TRANSFER_AMT;\r\n\r\n            // Erosion\r\n            cell_point.height -= EROSION_AMT * transfer_diff;\r\n            min_neighbor.height += EROSION_AMT * transfer_diff;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return points;\r\n}\r\n\r\nfunction render(voronoi: Voronoi<number[]>, points: IPoint[]) {\r\n  let min_height = points.reduce((agg, curr) => (getTotalHeight(curr) < agg ? getTotalHeight(curr) : agg), getTotalHeight(points[0]));\r\n  let max_height = points.reduce((agg, curr) => (getTotalHeight(curr) > agg ? getTotalHeight(curr) : agg), getTotalHeight(points[0]));\r\n\r\n  let max_water = points.reduce((agg, curr) => (curr.water > agg ? curr.water : agg), points[0].water);\r\n\r\n  ctx.clearRect(0, 0, 800, 600);\r\n\r\n  ctx.strokeStyle = \"black\";\r\n  for (let plate_idx = 0; plate_idx < NUM_PLATES; plate_idx++) {\r\n    console.log(\"Rendering \" + ctx.fillStyle);\r\n    let pts = points\r\n      .map((val, idx) => ({ p: val, idx }))\r\n      .filter(val => val.p.plateId === plate_idx);\r\n    let pl = pts.length;\r\n    for (let i = 0; i < pl; i++) {\r\n      ctx.beginPath();\r\n      \r\n      let p = pts[i];\r\n      voronoi.renderCell(p.idx, ctx);\r\n\r\n      let height_percent = 100 - (100 * (getTotalHeight(p.p) - min_height) / (max_height - min_height));\r\n      let color: TinyColor;\r\n      if (p.p.water < EVAPORATION_AMT) {\r\n        color = new TinyColor('brown');\r\n        color = color.shade(height_percent / 1.1);\r\n      } else {\r\n        let water_percent = lerp(0, 100, (p.p.water / max_water));\r\n        let shallow = new TinyColor(\"#0059ff\");\r\n        let deep = new TinyColor(\"#2109ab\");\r\n        color = shallow.mix(deep, water_percent);\r\n        // color = new TinyColor(\"blue\");\r\n      }\r\n      \r\n      ctx.fillStyle = color.toRgbString();\r\n      // ctx.fillStyle = `rgb(${height_percent}%, ${height_percent}%, ${height_percent}%)`\r\n      ctx.fill();\r\n\r\n      if (LINELESS) { ctx.strokeStyle = ctx.fillStyle; }\r\n      ctx.stroke();\r\n    }\r\n\r\n    // ctx.fillStyle = PLATE_COLOR_MAP[plate_idx];\r\n    // ctx.fill();\r\n    // ctx.stroke();\r\n    \r\n  }\r\n}\r\n\r\nfunction main() {\r\n  let points = generatePoints();\r\n  floodFill(points);\r\n  let voronoi_points = points.map(val => [val.loc.x, val.loc.y]);\r\n  let delaunay = Delaunay.from(voronoi_points);\r\n  let voronoi = delaunay.voronoi([0, 0, WIDTH, HEIGHT]);\r\n\r\n  for (let i = 0; i < NUM_POINTS; i++) {\r\n    let cp = voronoi.cellPolygon(i);\r\n    points[i].loc.x = cp.reduce((agg, val) => agg + val[0], 0) / cp.length;\r\n    points[i].loc.y = cp.reduce((agg, val) => agg + val[1], 0) / cp.length;\r\n  }\r\n\r\n  voronoi_points = points.map(val => [val.loc.x, val.loc.y]);\r\n  delaunay = Delaunay.from(voronoi_points);\r\n  voronoi = delaunay.voronoi([0, 0, WIDTH, HEIGHT]);\r\n\r\n  heightGen(voronoi, points);\r\n  waterGen(voronoi, points);\r\n\r\n  render(voronoi, points);\r\n}\r\n\r\nmain();","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}