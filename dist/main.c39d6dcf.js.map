{"version":3,"sources":["../node_modules/delaunator/index.js","../node_modules/d3-delaunay/src/path.js","../node_modules/d3-delaunay/src/polygon.js","../node_modules/d3-delaunay/src/voronoi.js","../node_modules/d3-delaunay/src/delaunay.js","../node_modules/d3-delaunay/src/index.js","main.ts","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["EPSILON","Math","pow","Delaunator","from","points","getX","getY","defaultGetX","defaultGetY","n","length","coords","Float64Array","i","p","constructor","minX","Infinity","minY","maxX","maxY","ids","Uint32Array","Error","x","y","cx","cy","minDist","i0","i1","i2","d","dist","i0x","i0y","i1x","i1y","minRadius","r","circumradius","i2x","i2y","orient","center","circumcenter","_cx","_cy","quicksort","_hashSize","ceil","sqrt","_hash","Array","e","hull","insertNode","_hashEdge","t","maxTriangles","triangles","halfedges","Int32Array","trianglesLen","_addTriangle","k","xp","yp","abs","startKey","_hashKey","key","start","removed","prev","next","walkBack","_legalize","q","removeNode","subarray","floor","pseudoAngle","a","b","a0","b0","al","ar","bl","p0","pr","pl","p1","illegal","inCircle","hbl","_link","br","c","dx","dy","ax","ay","bx","by","px","py","qx","qy","rx","ry","ex","ey","fx","fy","ap","bp","cp","cl","node","left","right","j","temp","compare","median","swap","d1","d2","arr","tmp","epsilon","Path","_x0","_y0","_x1","_y1","_","moveTo","closePath","lineTo","arc","x0","y0","rect","w","h","value","Polygon","push","slice","Voronoi","delaunay","xmin","ymin","xmax","ymax","circumcenters","vectors","t1","t2","t3","x1","y1","x2","y2","x3","y3","a2","a3","b2","b3","d3","ab","render","context","buffer","undefined","ti","tj","xi","yi","xj","yj","_renderSegment","v","_project","renderBounds","renderCell","_clip","cellPolygons","cell","cellPolygon","polygon","S","c0","_regioncode","c1","_clipSegment","contains","_step","_cell","inedges","e0","V","_clipInfinite","_clipFinite","P","e1","sx0","sy0","sx1","sy1","_edgecode","_edge","vx0","vy0","vxn","vyn","unshift","splice","vx","vy","tau","PI","pointX","pointY","Delaunay","fill","outedges","node0","node1","voronoi","bounds","neighbors","find","dc","dt","renderHull","renderPoints","hullPolygon","renderTriangle","t0","trianglePolygons","trianglePolygon","that","flatArray","flatIterable","array","call","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","hmrAcceptRun","window","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"main.c39d6dcf.js","sourceRoot":"..\\src","sourcesContent":["\nconst EPSILON = Math.pow(2, -52);\n\nexport default class Delaunator {\n\n    static from(points, getX, getY) {\n        if (!getX) getX = defaultGetX;\n        if (!getY) getY = defaultGetY;\n\n        const n = points.length;\n        const coords = new Float64Array(n * 2);\n\n        for (let i = 0; i < n; i++) {\n            const p = points[i];\n            coords[2 * i] = getX(p);\n            coords[2 * i + 1] = getY(p);\n        }\n\n        return new Delaunator(coords);\n    }\n\n    constructor(coords) {\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n\n        const n = coords.length >> 1;\n        const ids = this.ids = new Uint32Array(n);\n\n        if (n > 0 && typeof coords[0] !== 'number') throw new Error('Expected coords to contain numbers.');\n\n        this.coords = coords;\n\n        for (let i = 0; i < n; i++) {\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            ids[i] = i;\n        }\n\n        const cx = (minX + maxX) / 2;\n        const cy = (minY + maxY) / 2;\n\n        let minDist = Infinity;\n        let i0, i1, i2;\n\n        // pick a seed point close to the centroid\n        for (let i = 0; i < n; i++) {\n            const d = dist(cx, cy, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist) {\n                i0 = i;\n                minDist = d;\n            }\n        }\n        const i0x = coords[2 * i0];\n        const i0y = coords[2 * i0 + 1];\n\n        minDist = Infinity;\n\n        // find the point closest to the seed\n        for (let i = 0; i < n; i++) {\n            if (i === i0) continue;\n            const d = dist(i0x, i0y, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist && d > 0) {\n                i1 = i;\n                minDist = d;\n            }\n        }\n        let i1x = coords[2 * i1];\n        let i1y = coords[2 * i1 + 1];\n\n        let minRadius = Infinity;\n\n        // find the third point which forms the smallest circumcircle with the first two\n        for (let i = 0; i < n; i++) {\n            if (i === i0 || i === i1) continue;\n            const r = circumradius(i0x, i0y, i1x, i1y, coords[2 * i], coords[2 * i + 1]);\n            if (r < minRadius) {\n                i2 = i;\n                minRadius = r;\n            }\n        }\n        let i2x = coords[2 * i2];\n        let i2y = coords[2 * i2 + 1];\n\n        if (minRadius === Infinity) {\n            throw new Error('No Delaunay triangulation exists for this input.');\n        }\n\n        // swap the order of the seed points for counter-clockwise orientation\n        if (orient(i0x, i0y, i1x, i1y, i2x, i2y)) {\n            const i = i1;\n            const x = i1x;\n            const y = i1y;\n            i1 = i2;\n            i1x = i2x;\n            i1y = i2y;\n            i2 = i;\n            i2x = x;\n            i2y = y;\n        }\n\n        const center = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);\n        this._cx = center.x;\n        this._cy = center.y;\n\n        // sort the points by distance from the seed triangle circumcenter\n        quicksort(ids, coords, 0, ids.length - 1, center.x, center.y);\n\n        // initialize a hash table for storing edges of the advancing convex hull\n        this._hashSize = Math.ceil(Math.sqrt(n));\n        this._hash = new Array(this._hashSize);\n\n        // initialize a circular doubly-linked list that will hold an advancing convex hull\n        let e = this.hull = insertNode(coords, i0);\n        this._hashEdge(e);\n        e.t = 0;\n        e = insertNode(coords, i1, e);\n        this._hashEdge(e);\n        e.t = 1;\n        e = insertNode(coords, i2, e);\n        this._hashEdge(e);\n        e.t = 2;\n\n        const maxTriangles = 2 * n - 5;\n        const triangles = this.triangles = new Uint32Array(maxTriangles * 3);\n        const halfedges = this.halfedges = new Int32Array(maxTriangles * 3);\n\n        this.trianglesLen = 0;\n\n        this._addTriangle(i0, i1, i2, -1, -1, -1);\n\n        for (let k = 0, xp, yp; k < ids.length; k++) {\n            const i = ids[k];\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n\n            // skip near-duplicate points\n            if (k > 0 && Math.abs(x - xp) <= EPSILON && Math.abs(y - yp) <= EPSILON) continue;\n            xp = x;\n            yp = y;\n\n            // skip seed triangle points\n            if (i === i0 || i === i1 || i === i2) continue;\n\n            // find a visible edge on the convex hull using edge hash\n            const startKey = this._hashKey(x, y);\n            let key = startKey;\n            let start;\n            do {\n                start = this._hash[key];\n                key = (key + 1) % this._hashSize;\n            } while ((!start || start.removed) && key !== startKey);\n\n            start = start.prev;\n            e = start;\n            while (!orient(x, y, e.x, e.y, e.next.x, e.next.y)) {\n                e = e.next;\n                if (e === start) {\n                    e = null;\n                    break;\n                }\n            }\n            // likely a near-duplicate point; skip it\n            if (!e) continue;\n\n            const walkBack = e === start;\n\n            // add the first triangle from the point\n            let t = this._addTriangle(e.i, i, e.next.i, -1, -1, e.t);\n\n            e.t = t; // keep track of boundary triangles on the hull\n            e = insertNode(coords, i, e);\n\n            // recursively flip triangles from the point until they satisfy the Delaunay condition\n            e.t = this._legalize(t + 2);\n\n            // walk forward through the hull, adding more triangles and flipping recursively\n            let q = e.next;\n            while (orient(x, y, q.x, q.y, q.next.x, q.next.y)) {\n                t = this._addTriangle(q.i, i, q.next.i, q.prev.t, -1, q.t);\n                q.prev.t = this._legalize(t + 2);\n                this.hull = removeNode(q);\n                q = q.next;\n            }\n\n            if (walkBack) {\n                // walk backward from the other side, adding more triangles and flipping\n                q = e.prev;\n                while (orient(x, y, q.prev.x, q.prev.y, q.x, q.y)) {\n                    t = this._addTriangle(q.prev.i, i, q.i, -1, q.t, q.prev.t);\n                    this._legalize(t + 2);\n                    q.prev.t = t;\n                    this.hull = removeNode(q);\n                    q = q.prev;\n                }\n            }\n\n            // save the two new edges in the hash table\n            this._hashEdge(e);\n            this._hashEdge(e.prev);\n        }\n\n        // trim typed triangle mesh arrays\n        this.triangles = triangles.subarray(0, this.trianglesLen);\n        this.halfedges = halfedges.subarray(0, this.trianglesLen);\n    }\n\n    _hashEdge(e) {\n        this._hash[this._hashKey(e.x, e.y)] = e;\n    }\n\n    _hashKey(x, y) {\n        return Math.floor(pseudoAngle(x - this._cx, y - this._cy) * this._hashSize) % this._hashSize;\n    }\n\n    _legalize(a) {\n        const {triangles, coords, halfedges} = this;\n\n        const b = halfedges[a];\n\n        /* if the pair of triangles doesn't satisfy the Delaunay condition\n         * (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n         * then do the same check/flip recursively for the new pair of triangles\n         *\n         *           pl                    pl\n         *          /||\\                  /  \\\n         *       al/ || \\bl            al/    \\a\n         *        /  ||  \\              /      \\\n         *       /  a||b  \\    flip    /___ar___\\\n         *     p0\\   ||   /p1   =>   p0\\---bl---/p1\n         *        \\  ||  /              \\      /\n         *       ar\\ || /br             b\\    /br\n         *          \\||/                  \\  /\n         *           pr                    pr\n         */\n        const a0 = a - a % 3;\n        const b0 = b - b % 3;\n\n        const al = a0 + (a + 1) % 3;\n        const ar = a0 + (a + 2) % 3;\n        const bl = b0 + (b + 2) % 3;\n\n        if (b === -1) return ar;\n\n        const p0 = triangles[ar];\n        const pr = triangles[a];\n        const pl = triangles[al];\n        const p1 = triangles[bl];\n\n        const illegal = inCircle(\n            coords[2 * p0], coords[2 * p0 + 1],\n            coords[2 * pr], coords[2 * pr + 1],\n            coords[2 * pl], coords[2 * pl + 1],\n            coords[2 * p1], coords[2 * p1 + 1]);\n\n        if (illegal) {\n            triangles[a] = p1;\n            triangles[b] = p0;\n\n            const hbl = halfedges[bl];\n\n            // edge swapped on the other side of the hull (rare); fix the halfedge reference\n            if (hbl === -1) {\n                let e = this.hull;\n                do {\n                    if (e.t === bl) {\n                        e.t = a;\n                        break;\n                    }\n                    e = e.next;\n                } while (e !== this.hull);\n            }\n            this._link(a, hbl);\n            this._link(b, halfedges[ar]);\n            this._link(ar, bl);\n\n            const br = b0 + (b + 1) % 3;\n\n            this._legalize(a);\n            return this._legalize(br);\n        }\n\n        return ar;\n    }\n\n    _link(a, b) {\n        this.halfedges[a] = b;\n        if (b !== -1) this.halfedges[b] = a;\n    }\n\n    // add a new triangle given vertex indices and adjacent half-edge ids\n    _addTriangle(i0, i1, i2, a, b, c) {\n        const t = this.trianglesLen;\n\n        this.triangles[t] = i0;\n        this.triangles[t + 1] = i1;\n        this.triangles[t + 2] = i2;\n\n        this._link(t, a);\n        this._link(t + 1, b);\n        this._link(t + 2, c);\n\n        this.trianglesLen += 3;\n\n        return t;\n    }\n}\n\n// monotonically increases with real angle, but doesn't need expensive trigonometry\nfunction pseudoAngle(dx, dy) {\n    const p = dx / (Math.abs(dx) + Math.abs(dy));\n    return (dy > 0 ? 3 - p : 1 + p) / 4; // [0..1]\n}\n\nfunction dist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n\nfunction orient(px, py, qx, qy, rx, ry) {\n    return (qy - py) * (rx - qx) - (qx - px) * (ry - qy) < 0;\n}\n\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n    const dx = ax - px;\n    const dy = ay - py;\n    const ex = bx - px;\n    const ey = by - py;\n    const fx = cx - px;\n    const fy = cy - py;\n\n    const ap = dx * dx + dy * dy;\n    const bp = ex * ex + ey * ey;\n    const cp = fx * fx + fy * fy;\n\n    return dx * (ey * cp - bp * fy) -\n           dy * (ex * cp - bp * fx) +\n           ap * (ex * fy - ey * fx) < 0;\n}\n\nfunction circumradius(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = dx * ey - dy * ex;\n\n    const x = (ey * bl - dy * cl) * 0.5 / d;\n    const y = (dx * cl - ex * bl) * 0.5 / d;\n\n    return bl && cl && d && (x * x + y * y) || Infinity;\n}\n\nfunction circumcenter(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = dx * ey - dy * ex;\n\n    const x = ax + (ey * bl - dy * cl) * 0.5 / d;\n    const y = ay + (dx * cl - ex * bl) * 0.5 / d;\n\n    return {x, y};\n}\n\n// create a new node in a doubly linked list\nfunction insertNode(coords, i, prev) {\n    const node = {\n        i,\n        x: coords[2 * i],\n        y: coords[2 * i + 1],\n        t: 0,\n        prev: null,\n        next: null,\n        removed: false\n    };\n\n    if (!prev) {\n        node.prev = node;\n        node.next = node;\n\n    } else {\n        node.next = prev.next;\n        node.prev = prev;\n        prev.next.prev = node;\n        prev.next = node;\n    }\n    return node;\n}\n\nfunction removeNode(node) {\n    node.prev.next = node.next;\n    node.next.prev = node.prev;\n    node.removed = true;\n    return node.prev;\n}\n\nfunction quicksort(ids, coords, left, right, cx, cy) {\n    let i, j, temp;\n\n    if (right - left <= 20) {\n        for (i = left + 1; i <= right; i++) {\n            temp = ids[i];\n            j = i - 1;\n            while (j >= left && compare(coords, ids[j], temp, cx, cy) > 0) ids[j + 1] = ids[j--];\n            ids[j + 1] = temp;\n        }\n    } else {\n        const median = (left + right) >> 1;\n        i = left + 1;\n        j = right;\n        swap(ids, median, i);\n        if (compare(coords, ids[left], ids[right], cx, cy) > 0) swap(ids, left, right);\n        if (compare(coords, ids[i], ids[right], cx, cy) > 0) swap(ids, i, right);\n        if (compare(coords, ids[left], ids[i], cx, cy) > 0) swap(ids, left, i);\n\n        temp = ids[i];\n        while (true) {\n            do i++; while (compare(coords, ids[i], temp, cx, cy) < 0);\n            do j--; while (compare(coords, ids[j], temp, cx, cy) > 0);\n            if (j < i) break;\n            swap(ids, i, j);\n        }\n        ids[left + 1] = ids[j];\n        ids[j] = temp;\n\n        if (right - i + 1 >= j - left) {\n            quicksort(ids, coords, i, right, cx, cy);\n            quicksort(ids, coords, left, j - 1, cx, cy);\n        } else {\n            quicksort(ids, coords, left, j - 1, cx, cy);\n            quicksort(ids, coords, i, right, cx, cy);\n        }\n    }\n}\n\nfunction compare(coords, i, j, cx, cy) {\n    const d1 = dist(coords[2 * i], coords[2 * i + 1], cx, cy);\n    const d2 = dist(coords[2 * j], coords[2 * j + 1], cx, cy);\n    return (d1 - d2) || (coords[2 * i] - coords[2 * j]) || (coords[2 * i + 1] - coords[2 * j + 1]);\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultGetX(p) {\n    return p[0];\n}\nfunction defaultGetY(p) {\n    return p[1];\n}\n","const epsilon = 1e-6;\n\nexport default class Path {\n  constructor() {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n  }\n  moveTo(x, y) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  }\n  lineTo(x, y) {\n    this._ += `L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arc(x, y, r) {\n    x = +x, y = +y, r = +r;\n    const x0 = x + r;\n    const y0 = y;\n    if (r < 0) throw new Error(\"negative radius\");\n    if (this._x1 === null) this._ += `M${x0},${y0}`;\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) this._ += \"L\" + x0 + \",\" + y0;\n    if (!r) return;\n    this._ += `A${r},${r},0,1,1,${x - r},${y}A${r},${r},0,1,1,${this._x1 = x0},${this._y1 = y0}`;\n  }\n  rect(x, y, w, h) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${+w}v${+h}h${-w}Z`;\n  }\n  value() {\n    return this._ || null;\n  }\n}\n","export default class Polygon {\n  constructor() {\n    this._ = [];\n  }\n  moveTo(x, y) {\n    this._.push([x, y]);\n  }\n  closePath() {\n    this._.push(this._[0].slice());\n  }\n  lineTo(x, y) {\n    this._.push([x, y]);\n  }\n  value() {\n    return this._.length ? this._ : null;\n  }\n}\n","import Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\n\nexport default class Voronoi {\n  constructor(delaunay, [xmin, ymin, xmax, ymax] = [0, 0, 960, 500]) {\n    if (!((xmax = +xmax) >= (xmin = +xmin)) || !((ymax = +ymax) >= (ymin = +ymin))) throw new Error(\"invalid bounds\");\n    const {points, hull, triangles} = this.delaunay = delaunay;\n    const circumcenters = this.circumcenters = new Float64Array(triangles.length / 3 * 2);\n    const vectors = this.vectors = new Float64Array(points.length * 2);\n    this.xmax = xmax, this.xmin = xmin;\n    this.ymax = ymax, this.ymin = ymin;\n\n    // Compute circumcenters.\n    for (let i = 0, j = 0, n = triangles.length; i < n; i += 3, j += 2) {\n      const t1 = triangles[i] * 2;\n      const t2 = triangles[i + 1] * 2;\n      const t3 = triangles[i + 2] * 2;\n      const x1 = points[t1];\n      const y1 = points[t1 + 1];\n      const x2 = points[t2];\n      const y2 = points[t2 + 1];\n      const x3 = points[t3];\n      const y3 = points[t3 + 1];\n      const a2 = x1 - x2;\n      const a3 = x1 - x3;\n      const b2 = y1 - y2;\n      const b3 = y1 - y3;\n      const d1 = x1 * x1 + y1 * y1;\n      const d2 = d1 - x2 * x2 - y2 * y2;\n      const d3 = d1 - x3 * x3 - y3 * y3;\n      const ab = (a3 * b2 - a2 * b3) * 2;\n      circumcenters[j] = (b2 * d3 - b3 * d2) / ab;\n      circumcenters[j + 1] = (a3 * d2 - a2 * d3) / ab;\n    }\n\n    // Compute exterior cell rays.\n    let node = hull;\n    let p0, p1 = node.i * 4;\n    let x0, x1 = node.x;\n    let y0, y1 = node.y;\n    do {\n      node = node.next, p0 = p1, x0 = x1, y0 = y1, p1 = node.i * 4, x1 = node.x, y1 = node.y;\n      vectors[p0 + 2] = vectors[p1] = y0 - y1;\n      vectors[p0 + 3] = vectors[p1 + 1] = x1 - x0;\n    } while (node !== hull);\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {delaunay: {halfedges, hull}, circumcenters, vectors} = this;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = Math.floor(i / 3) * 2;\n      const tj = Math.floor(j / 3) * 2;\n      const xi = circumcenters[ti];\n      const yi = circumcenters[ti + 1];\n      const xj = circumcenters[tj];\n      const yj = circumcenters[tj + 1];\n      this._renderSegment(xi, yi, xj, yj, context);\n    }\n    let node = hull;\n    do {\n      node = node.next;\n      const t = Math.floor(node.t / 3) * 2;\n      const x = circumcenters[t];\n      const y = circumcenters[t + 1];\n      const v = node.i * 4;\n      const p = this._project(x, y, vectors[v + 2], vectors[v + 3]);\n      if (p) this._renderSegment(x, y, p[0], p[1], context);\n    } while (node !== hull);\n    return buffer && buffer.value();\n  }\n  renderBounds(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    context.rect(this.xmin, this.ymin, this.xmax - this.xmin, this.ymax - this.ymin);\n    return buffer && buffer.value();\n  }\n  renderCell(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const points = this._clip(i);\n    if (points === null) return;\n    context.moveTo(points[0], points[1]);\n    for (let i = 2, n = points.length; i < n; i += 2) {\n      context.lineTo(points[i], points[i + 1]);\n    }\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *cellPolygons() {\n    const {delaunay: {points}} = this;\n    for (let i = 0, n = points.length / 2; i < n; ++i) {\n      const cell = this.cellPolygon(i);\n      if (cell) yield cell;\n    }\n  }\n  cellPolygon(i) {\n    const polygon = new Polygon;\n    this.renderCell(i, polygon);\n    return polygon.value();\n  }\n  _renderSegment(x0, y0, x1, y1, context) {\n    let S;\n    const c0 = this._regioncode(x0, y0);\n    const c1 = this._regioncode(x1, y1);\n    if (c0 === 0 && c1 === 0) {\n      context.moveTo(x0, y0);\n      context.lineTo(x1, y1);\n    } else if (S = this._clipSegment(x0, y0, x1, y1, c0, c1)) {\n      context.moveTo(S[0], S[1]);\n      context.lineTo(S[2], S[3]);\n    }\n  }\n  contains(i, x, y) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return false;\n    return this.delaunay._step(i, x, y) === i;\n  }\n  _cell(i) {\n    const {circumcenters, delaunay: {inedges, halfedges, triangles}} = this;\n    const e0 = inedges[i];\n    if (e0 === -1) return null; // coincident point\n    const points = [];\n    let e = e0;\n    do {\n      const t = Math.floor(e / 3);\n      points.push(circumcenters[t * 2], circumcenters[t * 2 + 1]);\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) break; // bad triangulation\n      e = halfedges[e];\n    } while (e !== e0 && e !== -1);\n    return points;\n  }\n  _clip(i) {\n    const points = this._cell(i);\n    if (points === null) return null;\n    const {vectors: V} = this;\n    const v = i * 4;\n    return V[v] || V[v + 1]\n        ? this._clipInfinite(i, points, V[v], V[v + 1], V[v + 2], V[v + 3])\n        : this._clipFinite(i, points);\n  }\n  _clipFinite(i, points) {\n    const n = points.length;\n    let P = null;\n    let x0, y0, x1 = points[n - 2], y1 = points[n - 1];\n    let c0, c1 = this._regioncode(x1, y1);\n    let e0, e1;\n    for (let j = 0; j < n; j += 2) {\n      x0 = x1, y0 = y1, x1 = points[j], y1 = points[j + 1];\n      c0 = c1, c1 = this._regioncode(x1, y1);\n      if (c0 === 0 && c1 === 0) {\n        e0 = e1, e1 = 0;\n        if (P) P.push(x1, y1);\n        else P = [x1, y1];\n      } else {\n        let S, sx0, sy0, sx1, sy1;\n        if (c0 === 0) {\n          if ((S = this._clipSegment(x0, y0, x1, y1, c0, c1)) === null) continue;\n          [sx0, sy0, sx1, sy1] = S;\n        } else {\n          if ((S = this._clipSegment(x1, y1, x0, y0, c1, c0)) === null) continue;\n          [sx1, sy1, sx0, sy0] = S;\n          e0 = e1, e1 = this._edgecode(sx0, sy0);\n          if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n          if (P) P.push(sx0, sy0);\n          else P = [sx0, sy0];\n        }\n        e0 = e1, e1 = this._edgecode(sx1, sy1);\n        if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n        if (P) P.push(sx1, sy1);\n        else P = [sx1, sy1];\n      }\n    }\n    if (P) {\n      e0 = e1, e1 = this._edgecode(P[0], P[1]);\n      if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n    }\n    return P;\n  }\n  _clipSegment(x0, y0, x1, y1, c0, c1) {\n    while (true) {\n      if (c0 === 0 && c1 === 0) return [x0, y0, x1, y1];\n      if (c0 & c1) return null;\n      let x, y, c = c0 || c1;\n      if (c & 0b1000) x = x0 + (x1 - x0) * (this.ymax - y0) / (y1 - y0), y = this.ymax;\n      else if (c & 0b0100) x = x0 + (x1 - x0) * (this.ymin - y0) / (y1 - y0), y = this.ymin;\n      else if (c & 0b0010) y = y0 + (y1 - y0) * (this.xmax - x0) / (x1 - x0), x = this.xmax;\n      else y = y0 + (y1 - y0) * (this.xmin - x0) / (x1 - x0), x = this.xmin;\n      if (c0) x0 = x, y0 = y, c0 = this._regioncode(x0, y0);\n      else x1 = x, y1 = y, c1 = this._regioncode(x1, y1);\n    }\n  }\n  _clipInfinite(i, points, vx0, vy0, vxn, vyn) {\n    let P = Array.from(points), p;\n    if (p = this._project(P[0], P[1], vx0, vy0)) P.unshift(p[0], p[1]);\n    if (p = this._project(P[P.length - 2], P[P.length - 1], vxn, vyn)) P.push(p[0], p[1]);\n    if (P = this._clipFinite(i, P)) {\n      for (let j = 0, n = P.length, c0, c1 = this._edgecode(P[n - 2], P[n - 1]); j < n; j += 2) {\n        c0 = c1, c1 = this._edgecode(P[j], P[j + 1]);\n        if (c0 && c1) j = this._edge(i, c0, c1, P, j), n = P.length;\n      }\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      P = [this.xmin, this.ymin, this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax];\n    }\n    return P;\n  }\n  _edge(i, e0, e1, P, j) {\n    while (e0 !== e1) {\n      let x, y;\n      switch (e0) {\n        case 0b0101: e0 = 0b0100; continue; // top-left\n        case 0b0100: e0 = 0b0110, x = this.xmax, y = this.ymin; break; // top\n        case 0b0110: e0 = 0b0010; continue; // top-right\n        case 0b0010: e0 = 0b1010, x = this.xmax, y = this.ymax; break; // right\n        case 0b1010: e0 = 0b1000; continue; // bottom-right\n        case 0b1000: e0 = 0b1001, x = this.xmin, y = this.ymax; break; // bottom\n        case 0b1001: e0 = 0b0001; continue; // bottom-left\n        case 0b0001: e0 = 0b0101, x = this.xmin, y = this.ymin; break; // left\n      }\n      if ((P[j] !== x || P[j + 1] !== y) && this.contains(i, x, y)) {\n        P.splice(j, 0, x, y), j += 2;\n      }\n    }\n    return j;\n  }\n  _project(x0, y0, vx, vy) {\n    let t = Infinity, c, x, y;\n    if (vy < 0) { // top\n      if (y0 <= this.ymin) return null;\n      if ((c = (this.ymin - y0) / vy) < t) y = this.ymin, x = x0 + (t = c) * vx;\n    } else if (vy > 0) { // bottom\n      if (y0 >= this.ymax) return null;\n      if ((c = (this.ymax - y0) / vy) < t) y = this.ymax, x = x0 + (t = c) * vx;\n    }\n    if (vx > 0) { // right\n      if (x0 >= this.xmax) return null;\n      if ((c = (this.xmax - x0) / vx) < t) x = this.xmax, y = y0 + (t = c) * vy;\n    } else if (vx < 0) { // left\n      if (x0 <= this.xmin) return null;\n      if ((c = (this.xmin - x0) / vx) < t) x = this.xmin, y = y0 + (t = c) * vy;\n    }\n    return [x, y];\n  }\n  _edgecode(x, y) {\n    return (x === this.xmin ? 0b0001\n        : x === this.xmax ? 0b0010 : 0b0000)\n        | (y === this.ymin ? 0b0100\n        : y === this.ymax ? 0b1000 : 0b0000);\n  }\n  _regioncode(x, y) {\n    return (x < this.xmin ? 0b0001\n        : x > this.xmax ? 0b0010 : 0b0000)\n        | (y < this.ymin ? 0b0100\n        : y > this.ymax ? 0b1000 : 0b0000);\n  }\n}\n","import Delaunator from \"delaunator\";\nimport Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\nimport Voronoi from \"./voronoi.js\";\n\nconst tau = 2 * Math.PI;\n\nfunction pointX(p) {\n  return p[0];\n}\n\nfunction pointY(p) {\n  return p[1];\n}\n\nexport default class Delaunay {\n  constructor(points) {\n    const {halfedges, hull, triangles} = new Delaunator(points);\n    this.points = points;\n    this.halfedges = halfedges;\n    this.hull = hull;\n    this.triangles = triangles;\n    const inedges = this.inedges = new Int32Array(points.length / 2).fill(-1);\n    const outedges = this.outedges = new Int32Array(points.length / 2).fill(-1);\n\n    // Compute an index from each point to an (arbitrary) incoming halfedge.\n    for (let e = 0, n = halfedges.length; e < n; ++e) {\n      inedges[triangles[e % 3 === 2 ? e - 2 : e + 1]] = e;\n    }\n\n    // For points on the hull, index both the incoming and outgoing halfedges.\n    let node0, node1 = hull;\n    do {\n      node0 = node1, node1 = node1.next;\n      inedges[node1.i] = node0.t;\n      outedges[node0.i] = node1.t;\n    } while (node1 !== hull);\n  }\n  voronoi(bounds) {\n    return new Voronoi(this, bounds);\n  }\n  *neighbors(i) {\n    const {inedges, outedges, halfedges, triangles} = this;\n    const e0 = inedges[i];\n    if (e0 === -1) return; // coincident point\n    let e = e0;\n    do {\n      yield triangles[e];\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) return; // bad triangulation\n      e = halfedges[e];\n      if (e === -1) return yield triangles[outedges[i]];\n    } while (e !== e0);\n  }\n  find(x, y, i = 0) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return -1;\n    let c;\n    while ((c = this._step(i, x, y)) >= 0 && c !== i) i = c;\n    return c;\n  }\n  _step(i, x, y) {\n    const {inedges, points} = this;\n    if (inedges[i] === -1) return -1; // coincident point\n    let c = i;\n    let dc = (x - points[i * 2]) ** 2 + (y - points[i * 2 + 1]) ** 2;\n    for (const t of this.neighbors(i)) {\n      const dt = (x - points[t * 2]) ** 2 + (y - points[t * 2 + 1]) ** 2;\n      if (dt < dc) dc = dt, c = t;\n    }\n    return c;\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, halfedges, triangles} = this;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = triangles[i] * 2;\n      const tj = triangles[j] * 2;\n      context.moveTo(points[ti], points[ti + 1]);\n      context.lineTo(points[tj], points[tj + 1]);\n    }\n    this.renderHull(context);\n    return buffer && buffer.value();\n  }\n  renderPoints(context, r = 2) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points} = this;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i], y = points[i + 1];\n      context.moveTo(x + r, y);\n      context.arc(x, y, r, 0, tau);\n    }\n    return buffer && buffer.value();\n  }\n  renderHull(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {hull} = this;\n    let node = hull;\n    context.moveTo(node.x, node.y);\n    while (node = node.next, node !== hull) context.lineTo(node.x, node.y);\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  hullPolygon() {\n    const polygon = new Polygon;\n    this.renderHull(polygon);\n    return polygon.value();\n  }\n  renderTriangle(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, triangles} = this;\n    const t0 = triangles[i *= 3] * 2;\n    const t1 = triangles[i + 1] * 2;\n    const t2 = triangles[i + 2] * 2;\n    context.moveTo(points[t0], points[t0 + 1]);\n    context.lineTo(points[t1], points[t1 + 1]);\n    context.lineTo(points[t2], points[t2 + 1]);\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *trianglePolygons() {\n    const {triangles} = this;\n    for (let i = 0, n = triangles.length / 3; i < n; ++i) {\n      yield this.trianglePolygon(i);\n    }\n  }\n  trianglePolygon(i) {\n    const polygon = new Polygon;\n    this.renderTriangle(i, polygon);\n    return polygon.value();\n  }\n}\n\nDelaunay.from = function(points, fx = pointX, fy = pointY, that) {\n  return new Delaunay(\"length\" in points\n      ? flatArray(points, fx, fy, that)\n      : Float64Array.from(flatIterable(points, fx, fy, that)));\n};\n\nfunction flatArray(points, fx, fy, that) {\n  const n = points.length;\n  const array = new Float64Array(n * 2);\n  for (let i = 0; i < n; ++i) {\n    const p = points[i];\n    array[i * 2] = fx.call(that, p, i, points);\n    array[i * 2 + 1] = fy.call(that, p, i, points);\n  }\n  return array;\n}\n\nfunction* flatIterable(points, fx, fy, that) {\n  let i = 0;\n  for (const p of points) {\n    yield fx.call(that, p, i, points);\n    yield fy.call(that, p, i, points);\n    ++i;\n  }\n}\n","export {default as Delaunay} from \"./delaunay.js\";\nexport {default as Voronoi} from \"./voronoi.js\";\n","import { Vec2 } from \"./math/vec2\";\r\nimport { Delaunay, Voronoi } from \"d3-delaunay\";\r\n\r\nconst NUM_POINTS = 5000;\r\nconst WIDTH = 1280;\r\nconst HEIGHT = 720;\r\n\r\nconst NUM_PLATES = 10;\r\nconst PLATE_COLOR_MAP = [\r\n  \"black\",\r\n  \"blue\",\r\n  \"red\",\r\n  \"purple\",\r\n  \"green\",\r\n  \"teal\",\r\n  \"navy\",\r\n  \"yellow\",\r\n  \"magenta\",\r\n  \"white\",\r\n  \"pink\"\r\n];\r\n\r\ninterface IPoint {\r\n  loc: Vec2;\r\n  plateId: number;\r\n}\r\n\r\nlet canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\r\nlet ctx = canvas.getContext(\"2d\");\r\n\r\nfunction choose<T>(arr: Array<T>): number {\r\n  return Math.floor(Math.random() * arr.length);\r\n}\r\n\r\nfunction generatePoints(): IPoint[] {\r\n  let res = new Array<IPoint>(NUM_POINTS);\r\n  for (let i = 0; i < NUM_POINTS; i++) {\r\n    res[i] = {\r\n      loc: {\r\n        x: Math.random() * WIDTH,\r\n        y: Math.random() * HEIGHT\r\n      },\r\n      plateId: -1\r\n    };\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction dist(p1: Vec2, p2: Vec2): number {\r\n  return Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\r\n}\r\n\r\nfunction floodFill(points: IPoint[]): IPoint[] {\r\n  let unmapped_points = [...points];\r\n  let res = [];\r\n  for (let i = 0; i < NUM_PLATES; i++) {\r\n    let p_i = choose(unmapped_points);\r\n    let p = unmapped_points.splice(p_i, 1)[0];\r\n    p.plateId = i;\r\n    res.push(p);\r\n  }\r\n  while (unmapped_points.length > 0) {\r\n    let p_i = choose(unmapped_points);\r\n    let p = unmapped_points.splice(p_i, 1)[0];\r\n    let closest_i = -1;\r\n    let closest_dist = 0;\r\n    let rl = res.length;\r\n    for (let i = 0; i < rl; i++) {\r\n      let curr = res[i];\r\n      let d = dist(curr.loc, p.loc);\r\n      if (closest_i == -1 || d < closest_dist) {\r\n        closest_dist = d;\r\n        closest_i = i;\r\n      }\r\n    }\r\n    p.plateId = res[closest_i].plateId;\r\n    res.push(p);\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nlet points = generatePoints();\r\nfloodFill(points);\r\nlet voronoi_points = points.map(val => [val.loc.x, val.loc.y]);\r\nlet delaunay = Delaunay.from(voronoi_points);\r\nlet voronoi = delaunay.voronoi([0, 0, WIDTH, HEIGHT]);\r\n\r\nfor (let i = 0; i < NUM_POINTS; i++) {\r\n  let cp = voronoi.cellPolygon(i);\r\n  points[i].loc.x = cp.reduce((agg, val) => agg + val[0], 0) / cp.length;\r\n  points[i].loc.y = cp.reduce((agg, val) => agg + val[1], 0) / cp.length;\r\n}\r\n\r\nvoronoi_points = points.map(val => [val.loc.x, val.loc.y]);\r\ndelaunay = Delaunay.from(voronoi_points);\r\nvoronoi = delaunay.voronoi([0, 0, WIDTH, HEIGHT]);\r\n\r\nctx.clearRect(0, 0, 800, 600);\r\n\r\nctx.strokeStyle = \"black\";\r\nfor (let plate_idx = 0; plate_idx < NUM_PLATES; plate_idx++) {\r\n  ctx.beginPath();\r\n  console.log(\"Rendering \" + ctx.fillStyle);\r\n  let pts = points\r\n    .map((val, idx) => ({ p: val, idx }))\r\n    .filter(val => val.p.plateId === plate_idx);\r\n  let pl = pts.length;\r\n  for (let i = 0; i < pl; i++) {\r\n    let p = pts[i];\r\n    voronoi.renderCell(p.idx, ctx);\r\n  }\r\n  ctx.fillStyle = PLATE_COLOR_MAP[plate_idx];\r\n  ctx.fill();\r\n  ctx.stroke();\r\n}\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}